/*!
 * @license MIT
 * youbora-adapter-theoplayer2 6.5.5
 * Copyright NicePopleAtWork <http://nicepeopleatwork.com/>
 * @author Jesus Lopez
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.youbora=e():t.youbora=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=31)}([function(t,e,i){var n=i(4),s=i(10),r={_emitter:new n,on:function(){r._emitter.on.apply(r._emitter,arguments)},off:function(){r._emitter.off.apply(r._emitter,arguments)},emit:function(){r._emitter.emit.apply(r._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(t,e,i){if("undefined"!=typeof console&&console.log&&"undefined"!=typeof document){i=i||"darkcyan";var n,a={5:"e",4:"w",3:"n",2:"d",1:"v"}[e=e||r.Level.NOTICE],o="[Youbora]"+r._getCurrentTime()+" "+a+":";if(this.emit("log",{level:e,msg:t,prefix:o}),r.logLevel<=e)if(r.plainLogs||document.documentMode)r._plainReport(t,o);else n=e===r.Level.ERROR&&console.error?console.error:e===r.Level.WARNING&&console.warn?console.warn:e===r.Level.DEBUG&&console.debug?console.debug:console.log,o="%c"+o,s(t)?(t.splice(0,0,o,"color: "+i),n.apply(console,t)):n.call(console,o,"color: "+i,t)}},_getCurrentTime:function(){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},_plainReport:function(t,e){if(t instanceof Array)for(var i in t)r._plainReport(t[i],e);else"string"==typeof t?console.log(e+" "+t):(console.log(e+" <next line>"),console.log(t))},error:function(){r.report([].slice.call(arguments),r.Level.ERROR,"darkred")},warn:function(){r.report([].slice.call(arguments),r.Level.WARNING,"darkorange")},notice:function(){r.report([].slice.call(arguments),r.Level.NOTICE,"darkgreen")},debug:function(){r.report([].slice.call(arguments),r.Level.DEBUG,"indigo")},verbose:function(){r.report([].slice.call(arguments),r.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if("undefined"!=typeof window&&window.location&&window.location.search){var t=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==t&&(r.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(r.plainLogs=!0)}}};t.exports=r},function(t,e,i){var n=i(16),s=i(34),r=function(){};r.prototype={constructor:function(){}},r.extend=function(t,e){var i,r=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},n(i,r,e),i.prototype=s(r.prototype),t&&n(i.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i},t.exports=r},function(t,e,i){var n=i(0),s={stripProtocol:function(t){var e=t;try{e=t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(t){n.warn(t)}return e},addProtocol:function(t,e){var i="http://localhost/";try{i="http://"+t,e||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?i="https://"+t:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(i="//"+t)}catch(t){n.warn(t)}return i},parseNumber:function(t,e){return!isNaN(t)&&t>=0&&t!==1/0&&t!==-1/0&&null!=t?t:e},logAllEvents:function(t,e,i){try{if(n.logLevel<=n.Level.DEBUG){i=i||function(t){n.debug("Event: "+t.type)};var s=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];e&&(null===e[0]?(e.shift(),s=e):s=s.concat(e));for(var r=0;r<s.length;r++)"function"==typeof t?t.call(window,s[r],i):t.on?t.on(s[r],i):t.addEventListener&&t.addEventListener(s[r],i)}}catch(t){n.error(t)}},buildRenditionString:function(t,e,i){1===arguments.length&&(i=t,t=null,e=null);var n="";return t&&e&&(n=t+"x"+e),"number"!=typeof i||isNaN(i)||i<1?n:(n&&(n+="@"),(n+=i<1e3?Math.round(i)+"bps":i<1e6?(i=Math.round(i/1e3))+"Kbps":(i=Math.round(i/1e4)/100)+"Mbps")||null)},buildErrorParams:function(t,e,i,n){var s={};return"object"==typeof t?s=t:(s.errorCode=t||"FAILURE",s.msg=e||s.errorCode,s.errorMetadata=i,s.errorLevel=n),s},calculateAdViewability:function(t,e){var i=!0;if("undefined"!=typeof window&&t){var n=t.getBoundingClientRect();if(n.top>=window.innerHeight||n.bottom<=0||n.right<=0||n.left>=window.innerWidth)i=!1;else{var s=Math.trunc(n.height*n.width),r=n.top>0?n.top:0,a=n.bottom>window.innerHeight?window.innerHeight:n.bottom,o=n.left>0?n.left:0;i=100*(((n.right>window.innerWidth?window.innerWidth:n.right)-o)*(a-r))>s*(e||50)}}return i},assign:i(16),isArray:i(10)};t.exports=s},function(t,e){t.exports={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_MANIFEST:"will-send-ad-manifest",WILL_SEND_AD_POD_START:"will-send-ad-break-start",WILL_SEND_AD_POD_STOP:"will-send-ad-break-stop",WILL_SEND_AD_QUARTILE:"will-send-ad-quartile",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"},AdPosition:{Preroll:"pre",Midroll:"mid",Postroll:"post"},ManifestError:{NO_RESPONSE:"NO_RESPONSE",EMPTY:"EMPTY_RESPONSE",WRONG:"WRONG_RESPONSE"}}},function(t,e,i){var n=i(1),s=i(10),r=n.extend({on:function(t,e){if(this._listeners=this._listeners||{},"function"==typeof e)return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},off:function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){var i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}return this},emit:function(t,e){return this._listeners=this._listeners||{},e=e||{},s(this._listeners[t])&&this._listeners[t].forEach(this._eachCallback.bind(this,t,e)),s(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,t,e)),this},_eachCallback:function(t,e,i){"function"==typeof i&&i({type:t,data:e,target:this})}});t.exports=r},function(t,e,i){var n=i(1),s=i(0),r=i(2),a=n.extend({constructor:function(t,e,i,n){this.xhr=this.createXHR(),this.host=t||"",this.service=e||"",this.params=i||{},this.options=r.assign({},a.defaultOptions,n),this.retries=0,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){var t={};try{t=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){s.error(t)}return t},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(t,e,i){return this.xhr.addEventListener?this.xhr.addEventListener(t,e.bind(this,this,i)):t===a.Event.SUCCESS&&(this.xhr.onreadystatechange=function(){4==this.xhr.readyState&&e.bind(this,this,i)}.bind(this)),this},off:function(t,e){return this.xhr.removeEventListener(t,e),this},getParamString:function(){try{var t="?";for(var e in this.params){var i=this.params[e];if(null!==i&&"object"==typeof i){var n=JSON.stringify(i);"{}"!==n&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}else null!=i&&""!==i&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(i)+"&")}return t.slice(0,-1)}catch(t){return s.error(t),""}},getParam:function(t){return this.params[t]},setParam:function(t,e){return this.params[t]=e,this},setBody:function(t){this.body=t},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.requestHeaders[t]);if(this.options.retryAfter>0&&this.options.maxRetries>0){0===this.retries&&this.on(a.Event.ERROR,function(){if(this.retries>=this.options.maxRetries)s.error('Aborting failed request "'+this.service+'". Max retries reached.');else{s.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");try{setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter)}catch(t){"undefined"!=typeof atv?atv.setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter):s.error(t)}}}.bind(this))}for(var e in s.logLevel<=s.Level.VERBOSE&&s.verbose("XHR Req: "+this.getUrl()),a._globalListeners)a._globalListeners[e].forEach(function(t){this.on(e,t)}.bind(this));return this.xhr.send(this.body)}catch(t){s.error(t)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(t,e){a._globalListeners[t]=a._globalListeners[t]||[],a._globalListeners[t].push(e)},offEvery:function(t,e){if(a._globalListeners[t]){var i=a._globalListeners[t].indexOf(e);-1!==i&&a._globalListeners[t].splice(i,1)}}});t.exports=a},function(t,e,i){var n=i(4).extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(t){},isBlocking:function(t){return this._isBusy},done:function(){this._isBusy=!1,this.emit(n.Event.DONE)},hasToSend:function(t){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}});t.exports=n},function(t,e,i){var n=i(1).extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(t){var e=-1,i=(new Date).getTime();if(this.startTime){t&&!this.stopTime&&(this.stopTime=i);var n=this.pausetime?i-this.pausetime:0,s=this.stopTime?this.stopTime:i;e=this.offset-n+(s-this.startTime)}return e},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var t=new n;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}});t.exports=n},function(t,e,i){t.exports=i(32).version},function(t,e,i){var n=s,s={noConflict:function(){return s=n,this}};s.VERSION=i(8),s.polyfills=i(33),s.polyfills(),s.Object=i(1),s.Emitter=i(4),s.Log=i(0),s.Log.loadLevelFromUrl(),s.Util=i(2),s.HybridNetwork=i(17),s.Chrono=i(7),s.Timer=i(11),s.Constants=i(3),s.Request=i(5),s.Communication=i(12),s.Transform=i(6),s.ViewTransform=i(18),s.ResourceTransform=i(19),s.CdnParser=i(21),s.HlsParser=i(20),s.OfflineParser=i(23),s.LocationheaderParser=i(22),s.Options=i(24),s.Plugin=i(44),s.Storage=i(13),s.RequestBuilder=i(25),s.PlayheadMonitor=i(29),s.Adapter=i(15),s.adapters={},s.Infinity=i(14),s.BackgroundDetector=i(26),s.DeviceDetector=i(27),s.UUIDGenerator=i(28),s.registerAdapter=function(t,e){this.adapters[t]=e}.bind(s),s.unregisterAdapter=function(t){this.adapters[t]=null}.bind(s),t.exports=s},function(t,e){t.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){var n=i(1),s=i(7),r=n.extend({constructor:function(t,e){this.callback=t,this.interval=e||5e3,this.isRunning=!1,this._timer=null,this.chrono=new s},start:function(){this.isRunning||(this.isRunning=!0,this._setTick())},stop:function(){if(this.isRunning=!1,this._timer)try{clearTimeout(this._timer)}catch(t){"undefined"!=typeof atv&&atv.clearTimeout(this._timer)}},_setTick:function(){this.chrono.start();try{this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}catch(t){"undefined"!=typeof atv&&(this._timer=atv.setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval))}}});t.exports=r},function(t,e,i){var n=i(1),s=i(0),r=i(5),a=i(6),o=n.extend({constructor:function(t){this.transforms=[],this.pluginRef=t,this._requests=[]},sendRequest:function(t,e,i){t&&("function"==typeof e&&t.on(r.Event.SUCCESS,e,i),this._registerRequest(t))},buildRequest:function(t,e,i,n){var s=new r(t,e,i=i||{});"function"==typeof n&&s.on(r.Event.SUCCESS,n),this._registerRequest(s)},addTransform:function(t){t.parse&&t.isBlocking?(this.transforms.push(t),t.on(a.Event.DONE,this._processRequests.bind(this))):s.warn(t+" is not a valid RequestTransform.")},removeTransform:function(t){var e=this.transforms.indexOf(t);-1!==e?this.transforms.splice(e,1):s.warn("Trying to remove unexisting Transform '"+t+"'.")},_registerRequest:function(t){this._requests.push(t),this._processRequests()},_processRequests:function(){var t=this._requests;this._requests=[];for(var e=[];t.length;){var i=t.shift(),n=this._transform(i);n===a.STATE_NO_BLOCKED?(this.pluginRef&&(i.host=this.pluginRef.getHost()),i.send()):n===a.STATE_BLOCKED&&e.push(i)}for(;e.length;)this._requests.push(e.shift())},_transform:function(t){var e=a.STATE_NO_BLOCKED;return this.transforms.forEach((function(i){i.isBlocking(t)?e=a.STATE_BLOCKED:(i.parse(t),i.getState()===a.STATE_OFFLINE&&(e=a.STATE_OFFLINE))})),e}});t.exports=o},function(t,e,i){var n=i(1),s=i(0),r=n.extend({constructor:function(t,e){this.prefix=t||"youbora",this.disableCookies=e},setLocal:function(t,e){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+"."+t,e)}catch(t){s.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},isEnabled:function(){try{if(!this.disableCookies)return!0;localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(t){return!1}},getLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+"."+t)}catch(t){s.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},removeLocal:function(t){try{if("undefined"!=typeof localStorage&&localStorage)return localStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+"."+t)}catch(t){s.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return null},setSession:function(t,e){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.setItem(this.prefix+"."+t,e);if(!this.disableCookies)return this._setCookie(this.prefix+".session."+t,e)}catch(t){s.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.getItem(this.prefix+"."+t);if(!this.disableCookies)return this._getCookie(this.prefix+".session."+t)}catch(t){s.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},removeSession:function(t){try{if("undefined"!=typeof sessionStorage&&sessionStorage)return sessionStorage.removeItem(this.prefix+"."+t);if(!this.disableCookies)return this._removeCookie(this.prefix+".session."+t)}catch(t){s.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return null},getStorages:function(t){return this.getSession(t)||this.getLocal(t)},setStorages:function(t,e){this.setSession(t,e),this.setLocal(t,e)},removeStorages:function(t){this.removeSession(t),this.removeLocal(t)},_setCookie:function(t,e){"undefined"!=typeof document&&(document.cookie=t+"="+e+";")},_getCookie:function(t){if("undefined"!=typeof document)for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var s=i[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(e))return s.substring(e.length,s.length)}return null},_removeCookie:function(t){"undefined"!=typeof document&&(document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")}});t.exports=r},function(t,e,i){var n=i(4),s=i(12),r=i(47),a=n.extend({constructor:function(t){this._plugin=t},andBeyond:function(){a.prototype.begin.apply(this,arguments)},begin:function(t){this._comm=new s(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new r(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),!this._plugin.getIsSessionExpired()&&this._plugin.storage.getLocal("infinityStarted")?(this.fireNav(t),this._sendExtraBeat()):this.fireSessionStart(t)},_generateNewContext:function(){var t=null;try{t=btoa((new Date).getTime())}catch(e){t="Default"}this._plugin.storage.setSession("context",t)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(t){this._plugin.storage.setLocal("infinityStarted","true"),this._plugin.storage.removeLocal("infinityStopped"),this.infinityStarted=!0,this.infinityStopped=!1,this._generateNewContext(),this.emit(a.Event.SESSION_START,this._getParamsJson(t,null,null,!0,!0)),this._setLastActive()},fireSessionStop:function(t){this.infinityStopped=!0,this.emit(a.Event.SESSION_STOP,t),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive")},newSession:function(t,e){this.fireSessionStop(),this._plugin.storage.removeLocal("data"),this._plugin.setOptions(t),this._plugin.restartViewTransform(),this.fireSessionStart(e)},fireNav:function(t){this.isActive()&&(this._plugin.getContext()||this._generateNewContext(),this.emit(a.Event.NAV,this._getParamsJson(t,null,null,!0)))},_sendExtraBeat:function(){var t=(new Date).getTime();if(this._plugin&&this._plugin._beat){var e=this._plugin._beat.chrono.startTime?t-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(e),this._plugin._beat.chrono.startTime=t}this._setLastActive()},fireEvent:function(t,e,i){this.emit(a.Event.EVENT,this._getParamsJson(e,i,t)),this._setLastActive()},register:function(t,e){this._registeredProperties={dimensions:t,values:e},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(t,e){this._registeredProperties||this.register(t,e)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(t,e,i,n,s){var r={};if(i&&(r.name=i),r.dimensions=t||{},r.values=e||{},this._registeredProperties){for(var a in this._registeredProperties.dimensions)r.dimensions[a]=this._registeredProperties.dimensions[a];for(var o in this._registeredProperties.values)r.values[o]=this._registeredProperties.values[o]}var d={params:r};return n&&(d.params.dimensions.page&&(d.params.page=d.params.dimensions.page,delete d.params.dimensions.page),d.params.dimensions.route&&(d.params.route=d.params.dimensions.route,delete d.params.dimensions.route),s||delete d.params.dimensions,delete d.params.values),d},isActive:function(){var t=(new Date).getTime();return null!=this._plugin.storage.getLocal("infinityStarted")&&!this._plugin.storage.getLocal("infinityStopped")||Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}});t.exports=a},function(t,e,i){var n=i(4),s=i(0),r=i(2),a=i(8),o=i(53),d=i(54),u=i(29),h=i(7),c=n.extend({constructor:function(t){this.flags=new d,this.chronos=new o,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(t),this.tag=this.player,s.notice("Adapter "+this.getVersion()+" with Lib "+a+" is ready.")},setPlayer:function(t){this.player&&this.unregisterListeners(),"string"==typeof t&&"undefined"!=typeof document?this.player=document.getElementById(t):this.player=t,this.registerListeners()},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(t,e,i){this.stopMonitor();var n=0;t&&(n|=u.Type.BUFFER),e&&(n|=u.Type.SEEK),this.monitor&&this.monitor._timer.isRunning?this.monitor.skipNextTick():this.monitor=new u(this,n,i)},stopMonitor:function(){this.monitor&&this.monitor.stop()},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return a+"-generic-js"},getCdnTraffic:function(){return null},getP2PTraffic:function(){return null},getUploadTraffic:function(){return null},getIsP2PEnabled:function(){return null},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},getPosition:function(){return null},getGivenBreaks:function(){return null},getExpectedBreaks:function(){return null},getExpectedPattern:function(){return null},getBreaksTime:function(){return null},getGivenAds:function(){return null},getExpectedAds:function(){return null},getIsVisible:function(){return!0},getAudioEnabled:function(){return null},getIsSkippable:function(){return null},getIsFullscreen:function(){return null},getCampaign:function(){return null},getCreativeId:function(){return null},getProvider:function(){return null},fireInit:function(t){this.plugin&&this.plugin.fireInit()},fireStart:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.chronos.total.start(),this.chronos.join.start(),this.emit(c.Event.START,{params:t}))},fireJoin:function(t){this.flags.isJoined||this.flags.isStarted||this._isAds()||!this.plugin||!this.plugin.isInitiated||this.fireStart(),this.flags.isStarted&&!this.flags.isJoined&&(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(c.Event.JOIN,{params:t}))},firePause:function(t){this.flags.isBuffering&&this.fireBufferEnd(),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(c.Event.PAUSE,{params:t}))},fireResume:function(t){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(c.Event.RESUME,{params:t}))},fireBufferBegin:function(t,e){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!e)return;s.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(c.Event.BUFFER_BEGIN,{params:t})}},fireBufferEnd:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(c.Event.BUFFER_END,{params:t}))},cancelBuffer:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(t,e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===e)return;s.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(c.Event.SEEK_BEGIN,{params:t})}},fireSeekEnd:function(t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(c.Event.SEEK_END,{params:t}))},cancelSeek:function(t){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(t){(this._isAds()||this.plugin&&this.plugin._isStopReady())&&(this._isAds()&&this.flags.isStarted||!this._isAds()&&(this.flags.isStarted||this.plugin&&this.plugin.isInitiated))&&(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(c.Event.STOP,{params:t}),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset(),this.chronos.viewedMax.splice(0,this.chronos.viewedMax.length))},_isAds:function(){return!!this.getPosition()},fireCasted:function(t){t||(t={}),t.casted=!0,this.fireStop(t)},fireError:function(t,e,i,n){var s=r.buildErrorParams(t,e,i,n);s.code&&delete s.code,this.emit(c.Event.ERROR,{params:s})},fireFatalError:function(t,e,i,n){this.monitor&&this.monitor.stop(),this.fireError(t,e,i,n),this.fireStop()},fireClick:function(t){"string"==typeof t&&(t={url:t}),this.emit(c.Event.CLICK,{params:t})},fireQuartile:function(t){!this.flags.isStarted||!t||t<1||t>3||this.emit(c.Event.QUARTILE,{params:{quartile:t}})},startChronoView:function(){this.getIsVisible()&&!this.plugin.backgroundDetector.isInBackground&&(0!==this.chronos.viewedMax.length&&0===this.chronos.viewedMax[this.chronos.viewedMax.length-1].stopTime||(this.chronos.viewedMax.push(new h),this.chronos.viewedMax[this.chronos.viewedMax.length-1].start()))},stopChronoView:function(){this.chronos.viewedMax[0]&&this.chronos.viewedMax.length>0&&0===this.chronos.viewedMax[this.chronos.viewedMax.length-1].stopTime&&this.chronos.viewedMax[this.chronos.viewedMax.length-1].stop()},fireManifest:function(t,e){"string"==typeof t?this.emit(c.Event.MANIFEST,{params:{errorType:t,errorMessage:e}}):this.emit(c.Event.MANIFEST,{params:t})},fireSkip:function(t){void 0===t&&(t={}),t.skipped=!0,this.fireStop(t)},fireBreakStart:function(t){this.plugin.isBreakStarted||(this.plugin.isBreakStarted=!0,this.emit(c.Event.PODSTART,{params:t}))},fireBreakStop:function(t){this.plugin.isBreakStarted&&(this.emit(c.Event.PODSTOP,{params:t}),this.plugin.isBreakStarted=!1)},fireEvent:function(t,e,i){var n={};n.name=t||"",n.dimensions=e||{},n.values=i||{},this.emit(c.Event.VIDEO_EVENT,{params:n})}},{Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",MANIFEST:"manifest",PODSTART:"break-start",PODSTOP:"break-stop",QUARTILE:"quartile",VIDEO_EVENT:"video-event"}});t.exports=c},function(t,e){t.exports=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}},function(t,e){var i={getCdnTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)t+=Streamroot.peerAgents[e].stats.cdn;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.cdnDownload})),t}}if("undefined"!=typeof peer5&&peer5.getStats)return peer5.getStats().totalHttpDownloaded;if("undefined"!=typeof teltoo&&teltoo.getStats){var i=teltoo.getStats();return i.totalReceivedBytes-i.p2pReceivedBytes}return null},getP2PTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.p2p);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.dnaDownload})),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats?teltoo.getStats().p2pReceivedBytes:null},getUploadTraffic:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(var e in Streamroot.peerAgents)Streamroot.peerAgents[e].isP2PEnabled&&(t+=Streamroot.peerAgents[e].stats.upload);return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=0;return Streamroot.instances.forEach((function(e){t+=e.stats.currentContent.dnaUpload})),t}}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){if("undefined"!=typeof Streamroot){if(Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=!1;for(var e in Streamroot.peerAgents)t=t||Streamroot.peerAgents[e].isP2PEnabled;return t}if(Streamroot.instances&&Streamroot.instances.length>0){t=!1;return Streamroot.instances.forEach((function(e){t=t||e.dnaDownloadEnabled||e.dnaUploadEnabled})),t}}return"undefined"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}};t.exports=i},function(t,e,i){var n=i(5),s=i(6),r=i(0),a=i(2),o=i(3),d=s.extend({constructor:function(t,e){s.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=e,this._httpSecure=t.options["app.https"],this._plugin=t,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if(this._plugin.storage.isEnabled()&&((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData()))return this.setData(this._plugin.getStoredData()),null;var t=o.Service.DATA,e={apiVersion:"v7",outputformat:"json"};null!==(e=this._plugin.requestBuilder.buildParams(e,t))&&(r.notice(t+" "+e.system),"nicetest"===e.system&&r.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new n(this._plugin.getHost(),t,e).on(n.Event.SUCCESS,this._receiveData.bind(this)).on(n.Event.ERROR,this._failedData.bind(this)).send())},setData:function(t){try{var e=JSON.parse(t);this._plugin.options["parse.fdsResponseHost"]&&(t=t.replace(e.q.h,this._plugin.options["parse.fdsResponseHost"](e.q.h)),e=JSON.parse(t)),this.response.msg=t,this.response.host=a.addProtocol(e.q.h,this._httpSecure),this.response.code=e.q.c,this.response.pingTime=e.q.pt||5,this.response.beatTime=e.q.i&&e.q.i.bt||30,this.response.sessionExpire=e.q.i&&e.q.i.exp||300,this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(t){r.error("Fastdata response is invalid.")}},_receiveData:function(t,e){var i=t.getXHR().response;this.setData(i)},_failedData:function(t,e){r.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(t){this._session=t},getParentIdVideo:function(){return this._session},getSessionRoot:function(){return this._plugin.infinity&&this._plugin.infinity.isActive()?this._session:null},setSessionRoot:function(t){this._session=t},parse:function(t){t.host=t.host||this.response.host,t.params.system=this._plugin.getAccountCode(),t.params.sessionRoot=t.params.sessionRoot||this.getSessionRoot(),-1!==d.EventList.PingTime.indexOf(t.service)&&(t.params.pingTime=t.params.pingTime||this.response.pingTime),o.Service.SESSION_STOP!==t.service&&o.Service.STOP!==t.service||(t.params.sessionRoot=this._session||t.params.sessionRoot),-1===d.EventList.Infinity.indexOf(t.service)?(t.params.code=t.params.code||this.getViewCode(),t.params.sessionRoot||(t.params.sessionRoot=t.params.code)):(t.params.sessionId=t.params.sessionId||this.getSessionId(),t.params.sessionRoot||(t.params.sessionRoot=t.params.sessionId)),-1!==[o.Service.START,o.Service.INIT,o.Service.ERROR].indexOf(t.service)&&(this._plugin.infinity.infinityStarted||this._plugin.storage.isEnabled()&&this._plugin.storage.getLocal("infinityStarted"))&&(t.params.parentId=t.params.parentId||this.getParentIdVideo(),t.params.navContext=t.params.navContext||this._plugin.getContext())}},{EventList:{CreateView:[o.Service.START,o.Service.INIT,o.Service.ERROR],Infinity:[o.Service.NAV,o.Service.SESSION_START,o.Service.SESSION_STOP,o.Service.EVENT,o.Service.BEAT],PingTime:[o.Service.START,o.Service.PING]}});t.exports=d},function(t,e,i){var n=i(6),s=i(20),r=i(21),a=i(42),o=i(22),d=i(0),u=i(3),h=n.extend({constructor:function(t){h.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=t,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){var t=this._realResource||this._initResource;return this._plugin&&this._plugin.options&&this._plugin.options["content.resource"]&&!this._plugin.options["parse.locationHeader"]&&!this._plugin.options["parse.hls"]&&!this._plugin.options["parse.dash"]&&(t=this._plugin.options["content.resource"]),t},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(t){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=t,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._dashEnabled=this._plugin.isDash(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),r.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._dashEnabled?this._dashParse():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,n.prototype.done.apply(this,arguments)},_setTimeout:function(){try{this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),d.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3)}catch(t){"undefined"!=typeof atv?this._parseTimeout=atv.setTimeout(function(){this._isBusy&&(this.done(),d.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3):d.error(t)}},_parseLocHeader:function(){var t=new o;t.parse(this._initResource),t.on(o.Event.DONE,function(){this._realResource=t.getResource(),this.done()}.bind(this))},_parseHLS:function(){var t=new s;t.on(s.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_dashParse:function(){var t=new a;t.on(a.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_parseCDN:function(){if(this._cdnList.length>0){var t=this._cdnList.shift();if(this.getNodeHost())return;var e=r.create(t);e?(e.on(r.Event.DONE,function(){this._responses=e.getResponses(),this._cdnName=e.getParsedCdnName(),this._cdnNodeHost=e.getParsedNodeHost(),this._cdnNodeTypeString=e.getParsedNodeTypeString(),this._cdnNodeType=e.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),e.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(t){if(t.service===u.Service.START){var e=this._plugin.requestBuilder.lastSent;e.parsedResource=t.params.parsedResource=this.getResource(),this._cdnEnabled&&(e.cdn=t.params.cdn=t.params.cdn||this.getCdnName(),e.nodeHost=t.params.nodeHost=this.getNodeHost(),e.nodeType=t.params.nodeType=this.getNodeType(),e.nodeTypeString=t.params.nodeTypeString=this.getNodeTypeString())}}});t.exports=h},function(t,e,i){var n=i(5),s=i(4),r=i(0),a=s.extend({constructor:function(){this._realResource=null},done:function(){this.emit(a.Event.DONE)},parse:function(t,e){e=e||"";try{var i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)((\?|;)\S*|\n|\r|$))/i.exec(t)}catch(t){r.warn("Parse HLS Regex failed",t),this.done()}if(null!==i){var s=i[1].trim(),a="",o=e.lastIndexOf("/");if(0!==s.indexOf("http")&&-1!==o&&(s=e.slice(0,o)+"/"+s,a=e.slice(0,o)+"/"),".m3u8"===i[3]||".m3u"===i[3]){var d=new n(s,null,null,{cache:!0});d.on(n.Event.SUCCESS,function(t){this.parse(t.getXHR().responseText,a+i[2])}.bind(this)),d.on(n.Event.ERROR,function(t){this.done()}.bind(this)),d.send()}else this._realResource=s,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=a},function(t,e,i){var n=i(4),s=i(0),r=i(2),a=i(5),o=n.extend({constructor:function(t){this._options=r.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},t),this._responses={}},done:function(){this.emit(o.Event.DONE)},addParser:function(t){return this._options.parsers.push(t),this},setCdnName:function(t){return this._options.cdnName=t,this},setRequestMethod:function(t){return this._options.requestMethod=t,this},setRequestHeader:function(t,e){return this._options.requestHeaders[t]=e,this},setParseType:function(t){return this._options.parseType=t,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(t,e){this._responses=e||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(t)},_requestResponse:function(t){var e=JSON.stringify(this._options.requestHeaders),i=new a(t,null,null,{method:this._options.requestMethod,maxRetries:0,requestHeaders:this._options.requestHeaders});i.on(a.Event.SUCCESS,function(t){this._responses[e]=t.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[e])}.bind(this)),i.on(a.Event.ERROR,function(t){this.done()}.bind(this)),i.send()},_parseResponse:function(t){this._options.parsers.forEach(function(e){t.split("\n").forEach(function(t){var i=t.indexOf(":");-1!==i&&(t.slice(0,i)===e.headerName&&this._executeParser(e,t.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(t,e){try{var i=t.regex.exec(e.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),t.element){case o.ElementType.HOST:this._cdnNodeHost=i[1];break;case o.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case o.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(t){s.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+e)}}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(t){o._cdnConfigs.Balancer.parsers[0].headerName=t},create:function(t){if(o._cdnConfigs[t])return new o(o._cdnConfigs[t]);s.warn("Tried to create an unexisting CdnParser named "+t)},add:function(t,e){o._cdnConfigs[t]=e}});o.add("Level3",i(35)),o.add("Cloudfront",i(36)),o.add("Akamai",i(37)),o.add("Highwinds",i(38)),o.add("Fastly",i(39)),o.add("Telefonica",i(40)),o.add("Balancer",i(41)),t.exports=o},function(t,e,i){var n=i(4),s=i(5),r=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(r.Event.DONE)},parse:function(t){var e=new s(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:{},cache:!0});e.on(s.Event.SUCCESS,function(t){this._realResource=t.getXHR().responseURL,this.done()}.bind(this)),e.on(s.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=r},function(t,e,i){var n=i(6),s=n.extend({constructor:function(t,e){this._sendRequest=!1,this._isBusy=!1,this.plugin=t,this.session=e,this.transformName="Offline"},parse:function(t){t&&this.plugin.offlineStorage.addEvent(t.service,t.params)},hasToSend:function(t){return!1},getState:function(){return n.STATE_OFFLINE}});t.exports=s},function(t,e,i){var n=i(1),s=i(43),r=i(0),a=n.extend({constructor:function(t){this.enabled=!0,this.host="a-fds.youborafds01.com",this.accountCode="nicetest",this.preventZombieViews=!0,this.offline=!1,this.referer=null,this.experiments=[],this.disableCookies=!0,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["parse.hls"]=!1,this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds","Telefonica"],this["parse.locationHeader"]=!1,this["parse.dash"]=!1,this["parse.fdsResponseHost"]=null,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["device.isAnonymous"]=!1,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.title"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.bitrate"]=null,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.subtitles"]=null,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.creativeId"]=null,this["ad.provider"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.expectedPattern"]=null,this["ad.givenAds"]=null,this["ad.breaksTime"]=null,this["ad.expectedBreaks"]=null,this["ad.givenBreaks"]=null,this["ad.ignore"]=!1,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iOS"]="stop",this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this.waitForMetadata=!1,this.pendingMetadata=[],this.setOptions(t)},setOptions:function(t,e){var i=!1;if(void 0===e){e=this,i=!0;var n=new s}if(void 0!==t)for(var a in t){var o=!1,d=null;i&&(this.hasOwnProperty(a)||(n.exists(a)?(d=n.getNewName(a),o=!0):r.warn('The option "'+a+'" does not exist, so it cannot be set'))),"object"!=typeof e[a]||null===e[a]||Array.isArray(e[a])||"parse.cdnNode.list"!==a?o?e[d]=t[a]:e[a]=t[a]:this.setOptions(t[a],e[a])}},setExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=20&&(t=t.slice(0,20));t.length<20;)t.push(null);t.forEach(function(t,e){this["content.customDimension."+(e+1).toString()]=t}.bind(this))}},setCustomDimensions:function(){a.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(t){if("object"==typeof t&&t.length){for(t.length>=10&&(t=t.slice(0,10));t.length<10;)t.push(null);t.forEach(function(t,e){this["ad.customDimension."+(e+1).toString()]=t}.bind(this))}},setAdCustomDimensions:function(){a.prototype.setAdExtraParams.apply(this,arguments)}});t.exports=a},function(t,e,i){var n=i(1),s=i(0),r=["accountCode","username","anonymousUser","rendition","deviceInfo","player","title","title2","live","mediaDuration","mediaResource","parsedResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","obfuscateIp","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","referer","userType","streamingProtocol","householdId","experiments","adsBlocked","adsExpected","deviceUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution"],a=["playhead","adTitle","adPosition","adDuration","adCampaign","adCreativeId","adProvider","adResource","adPlayerVersion","adProperties","adAdapterVersion","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10","fullscreen","audio","skippable"],o=n.extend({constructor:function(t){this._plugin=t,this._adNumber=0,this.lastSent={}},fetchParams:function(t,e,i){t=t||{},e=e||[];for(var n=0;n<e.length;n++){var r=e[n];if(!t[r]){var a=o.getters[r];if(this._plugin[a]){var d=this._plugin[a]();null===d||i&&this.lastSent[r]===d||(t[r]=d,this.lastSent[r]=d)}else s.warn("Trying to call undefined getter "+r+":"+a)}}return t},getGetters:function(){return o.getters},buildBody:function(t){return this.fetchParams(null,o.bodyParams[t],!1)},buildParams:function(t,e){return t=t||{},this.fetchParams(t,o.params[e],!1),this.fetchParams(t,o.differentParams[e],!0),t},getNewAdNumber:function(){var t=this.lastSent.adNumber;return t&&this.lastSent.adPosition===this._plugin.getAdPosition()?t+=1:t=1,this.lastSent.adNumber=t,t},getChangedEntities:function(){return this.fetchParams({},o.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username"],"/init":r,"/start":r,"/joinTime":["joinDuration","playhead","mediaDuration"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(r),"/stop":["bitrate","playhead","pauseDuration"],"/infinity/video/event":[],"/adInit":a,"/adStart":a,"/adJoin":["playhead","adPosition","adJoinDuration","adPlayhead"],"/adPause":["playhead","adPosition","adPlayhead"],"/adResume":["playhead","adPosition","adPlayhead","adPauseDuration"],"/adBufferUnderrun":["playhead","adPosition","adPlayhead","adBufferDuration"],"/adStop":["playhead","adPosition","adPlayhead","adBitrate","adTotalDuration","pauseDuration","adViewedDuration","adViewability"],"/adClick":["playhead","adPosition","adPlayhead"],"/adError":a,"/adManifest":["givenBreaks","expectedBreaks","expectedPattern","breaksTime"],"/adBreakStart":["breakPosition","givenAds","expectedAds"],"/adBreakStop":[],"/adQuartile":["breakPosition","adPosition","adViewedDuration","adViewability"],"/adBlocked":a,"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics"],"/infinity/session/start":["accountCode","username","anonymousUser","navContext","route","page","referer","referral","language","deviceInfo","adsBlocked","deviceUUID","libVersion","appName","appReleaseVersion"],"/infinity/session/stop":[],"/infinity/session/nav":["navContext","route","page"],"/infinity/session/beat":["sessionMetrics"],"/infinity/session/event":["accountCode","navContext"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",parsedResource:"getParsedResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",obfuscateIp:"getObfuscateIp",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adCreativeId:"getAdCreativeId",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",givenBreaks:"getGivenBreaks",expectedBreaks:"getExpectedBreaks",expectedPattern:"getExpectedPattern",breaksTime:"getBreaksTime",breakPosition:"getAdPosition",givenAds:"getGivenAds",expectedAds:"getExpectedAds",adsExpected:"getAdsExpected",adViewedDuration:"getAdViewedDuration",adViewability:"getAdViewability",fullscreen:"getIsFullscreen",audio:"getAudioEnabled",skippable:"getIsSkippable",adProvider:"getAdProvider",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceInfo:"getDeviceInfo",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",navContext:"getContext",page:"getPageName",cdnDownloadedTraffic:"getCdnTraffic",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",viewJson:"getOfflineView",experiments:"getExperiments",deviceUUID:"getDeviceUUID",sessionMetrics:"getSessionMetrics",adsBlocked:"getIsBlocked",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}});t.exports=o},function(t,e,i){var n=i(1).extend({constructor:function(t){this.plugin=t,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(){this.isBackgroundDetectorStarted||"undefined"==typeof document||(this.isBackgroundDetectorStarted=!0,document.addEventListener("visibilitychange",this.listenerReference))},stopDetection:function(){this.isBackgroundDetectorStarted&&"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1},_visibilityListener:function(t){if("undefined"!=typeof document){var e=this._getSettings();if("hidden"===document.visibilityState){if(this.isInBackground=!0,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.stopChronoView(),"string"==typeof e){switch(e){case"stop":this._fireStop();break;case"pause":this._firePause()}if(null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped")){this.lastBeatTime=(new Date).getTime();var i=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(i),this.plugin._beat.stop()}}}else if("visible"===document.visibilityState&&(this.isInBackground=!1,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.startChronoView(),"string"==typeof e&&e&&null!=this.plugin.storage.getLocal("infinityStarted")&&!this.plugin.storage.getLocal("infinityStopped"))){var n=(new Date).getTime();n-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(n-this.lastBeatTime),this.plugin._beat.start()):(this.plugin.restartViewTransform(),this.plugin.infinity.begin())}}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.plugin.fireStop()},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options["background.enabled"]&&this.plugin.backgroundDetector._getSettings()}});t.exports=n},function(t,e,i){var n=i(1).extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTV=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTV&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTV)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTV}});t.exports=n},function(t,e,i){var n=i(50),s=i(1),r=i(51),a=s.extend({constructor:function(t){this.plugin=t,this.dataExtractor=new n,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var t=this.dataExtractor.getAllData();this.key=this._hashFunction(t),this.plugin.storage.setLocal("youboraDeviceUUID",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(t){var e=t;return"string"!=typeof t&&(e=JSON.stringify(t)),r(e)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraDeviceUUID")}});t.exports=a},function(t,e,i){var n=i(1),s=i(11),r=i(7),a=n.extend({constructor:function(t,e,i){this._adapter=t,this._seekEnabled=e&a.Type.SEEK,this._bufferEnabled=e&a.Type.BUFFER,i=i||800,this._chrono=new r,this._lastPlayhead=0,i>0&&(this._timer=new s(this.progress.bind(this),i))},start:function(){this._timer.start()},stop:function(){this._lastPlayhead=0,this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var t=this._chrono.stop();this._chrono.start();var e=t*a.kBUFFER_THRESHOLD_RATIO,i=t*a.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!==this._adapter.getPlayrate()&&(e*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var n=this._getPlayhead(),s=1e3*Math.abs(this._lastPlayhead-n);s<e?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):s>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=n},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});t.exports=a},function(t){t.exports=JSON.parse('{"name":"theoplayer2","type":"adapter","tech":"js","author":"Jesus Lopez","version":"6.5.5","built":"2019-09-10","repo":"https://bitbucket.org/npaw/theoplayer2-adapter-js","libVersion":"^6.5.14","features":{"buffer":"monitor","seek":"native","error":true,"stop":true,"pause":true,"resume":true,"getters":["getPlayhead","getPlayrate","getDuration","getBitrate","getThroughput","getRendition","getIsLive","getResource","getPlayerVersion","getLatency"]},"ads":[{"buffer":"monitor","seek":"monitor","error":true,"stop":true,"pause":true,"resume":true,"getters":["getPlayhead","getDuration","getTitle","getResource","getPosition","getGivenBreaks","getBreaksTime","getGivenAds","getIsVisible","getAudioEnabled","getIsSkippable","getIsFullscreen"],"filename":"generic.js"}]}')},function(t,e,i){var n=i(9);i(63),t.exports=n},function(t){t.exports=JSON.parse('{"name":"youboralib","type":"lib","tech":"js","author":"Jordi Aguilar","version":"6.5.14","built":"2019-08-26","repo":"https://bitbucket.org/npaw/lib-plugin-js.git"}')},function(t,e){t.exports=function(){Function.prototype.bind=Function.prototype.bind||function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice,i=e.call(arguments,1),n=this,s=function(){},r=function(){return n.apply(this instanceof s?this:t||window,i.concat(e.call(arguments)))};return s.prototype=this.prototype,r.prototype=new s,r},Array.prototype.forEach=Array.prototype.forEach||function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function!");for(var i=this.length,n=0;n<i;n++)t.call(e,this[n],n,this)}}},function(t,e){var i=function(){};t.exports=function(t){if(arguments.length>1)throw Error("Second argument not supported");if(null===t)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw TypeError("Argument must be an object");return i.prototype=t,new i}},function(t,e){t.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(t){if(t){if(0===t.indexOf("TCP_HIT")||0===t.indexOf("TCP_MEM_HIT")||0===t.indexOf("TCP_IMS_HIT"))return 1;if(0===t.indexOf("TCP_MISS"))return 2}return 0}}},function(t,e){t.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"AKAMAI",requestMethod:"GET",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(t){return-1!==t.indexOf("HIT")?1:-1!==t.indexOf("MISS")?2:0}}},function(t,e){t.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(t){switch(t){case"c":case"x":return 1;default:return 2}}}},function(t,e){t.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(t){switch(t){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(t){if(t){if(-1!==t.indexOf("p")||-1!==t.indexOf("c"))return 1;if(-1!==t.indexOf("i")||-1!==t.indexOf("m"))return 2}return 0}}},function(t,e){t.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},function(t,e,i){var n=i(5),s=i(4),r=i(0),a=s.extend({constructor:function(){this._realResource=null},done:function(){this.emit(a.Event.DONE)},parse:function(t){var e=new n(t,null,null,{cache:!0}),i=new RegExp(/.*<Location>(.+)<\/Location>.*/),s=null;e.on(n.Event.SUCCESS,function(e){var n=e.getXHR().responseText;try{s=i.exec(n)}catch(t){r.warn("Dash location parse failed")}s&&s[1]?this.parse(s[1]):this.parseFinalResource(n,t)}.bind(this)),e.on(n.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},parseFinalResource:function(t,e){var i=new RegExp(/[\s\S]*<SegmentURL[\s\S]*media="(.+)"[\s\S]*/),n=new RegExp(/[\s\S]*<SegmentTemplate[\s\S]*media="(.+)"[\s\S]*/),s=null;try{s=n.exec(t)}catch(t){r.warn("Dash segment template parse failed")}if(null===s)try{s=i.exec(t)}catch(t){r.warn("Dash segment url parse failed")}s&&s[1]&&this._isFullUrl(s[1])?s[1].indexOf('"')>0?this._realResource=s[1].substr(0,s[1].indexOf('"')):this._realResource=s[1]:this._realResource=e,this.done()},_isFullUrl:function(t){return-1!==t.indexOf("http")},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=a},function(t,e,i){var n=i(1),s=i(0),r=n.extend({exists:function(t){return r.Dictionary.hasOwnProperty(t)},getNewName:function(t){var e=r.Dictionary[t];return s.warn('The option "'+t+'" is deprecated, use "'+e+'" instead'),e}},{Dictionary:{httpSecure:"app.https",username:"user.name",anonymousUser:"user.anonymousId",obfuscateIp:"user.obfuscateIp",userType:"user.type","content.title2":"content.program","background.settings.iphone":"background.settings.iOS","extraparam.1":"content.customDimension.1","extraparam.2":"content.customDimension.2","extraparam.3":"content.customDimension.3","extraparam.4":"content.customDimension.4","extraparam.5":"content.customDimension.5","extraparam.6":"content.customDimension.6","extraparam.7":"content.customDimension.7","extraparam.8":"content.customDimension.8","extraparam.9":"content.customDimension.9","extraparam.10":"content.customDimension.10","extraparam.11":"content.customDimension.11","extraparam.12":"content.customDimension.12","extraparam.13":"content.customDimension.13","extraparam.14":"content.customDimension.14","extraparam.15":"content.customDimension.15","extraparam.16":"content.customDimension.16","extraparam.17":"content.customDimension.17","extraparam.18":"content.customDimension.18","extraparam.19":"content.customDimension.19","extraparam.20":"content.customDimension.20","ad.extraparam.1":"ad.content.customDimension.1","ad.extraparam.2":"ad.content.customDimension.2","ad.extraparam.3":"ad.content.customDimension.3","ad.extraparam.4":"ad.content.customDimension.4","ad.extraparam.5":"ad.content.customDimension.5","ad.extraparam.6":"ad.content.customDimension.6","ad.extraparam.7":"ad.content.customDimension.7","ad.extraparam.8":"ad.content.customDimension.8","ad.extraparam.9":"ad.content.customDimension.9","ad.extraparam.10":"ad.content.customDimension.10"}});t.exports=r},function(t,e,i){var n=i(4),s=i(11),r=i(7),a=i(3),o=i(2),d=i(5),u=i(12),h=i(45),c=i(18),l=i(19),p=i(23),f=i(24),g=i(13),m=i(46),_=i(25),v=i(14),S=i(26),E=i(27),y=i(48),A=i(49),T=i(28),b=n.extend({constructor:function(t,e){this.storage=new g,this.uuidGenerator=new T(this),this.infinity=new v(this),this.isInitiated=!1,this.isAdsManifestSent=!1,this.playedPostrolls=0,this.isBreakStarted=!1,this.initChrono=new r,this.options=new f(t),this.storage=new g(null,this.options.disableCookies),this.offlineStorage=new m,this._adapter=null,this._adsAdapter=null,this._ping=new s(this._sendPing.bind(this),5e3),this._beat=new s(this._sendBeat.bind(this),3e4),this._refreshData=new s(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||3e5,this.requestBuilder=new _(this),this.resourceTransform=new l(this),this.lastEventTime=null,e&&this.setAdapter(e),this.restartViewTransform(),this._initInfinity(),this.deviceDetector=new E,this.backgroundDetector=new S(this),this.resizeScrollDetector=new A(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection(),this.blockDetector=new y(this)},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted&&!this.infinity.infinityStopped||this.restartViewTransform()},restartViewTransform:function(t){this.viewTransform=new c(this),this.viewTransform.on(c.Event.DONE,this._receiveData.bind(this)),t?this.viewTransform.setData(t):this.getIsDataExpired()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.storage.removeLocal("infinityStopped"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(t){this._ping.interval=1e3*t.target.response.pingTime,this._beat.interval=1e3*t.target.response.beatTime,this.sessionExpire=1e3*t.target.response.sessionExpire,this.storage.setStorages("data",t.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new l(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isAdsManifestSent=!1,this.initChrono.reset(),this._totalPrerollsTime=0,this.requestBuilder.lastSent.breakNumber=0,this.requestBuilder.lastSent.adNumber=0,this._savedAdManifest=null,this._savedAdError=null,this.playedPostrolls=0,this.isBreakStarted=!1},_send:function(t,e,i,n,s,r,o){var u=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&u>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=e===a.Service.STOP?null:u,i=this.requestBuilder.buildParams(i,e),this.getIsLive()&&(i.mediaDuration=void 0,i.playhead=void 0);var h={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(t,h),this._comm&&(null!==i||void 0!==s)&&this.options.enabled){this.lastServeiceSent=e;var c={};void 0!==s&&"GET"!==s&&(c.method=s);var l=new d(null,e,i,c);n&&l.setBody(n),this._comm.sendRequest(l,r,o)}},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new u,this._comm.addTransform(new h),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new p(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(t){t&&(this.options.setOptions(t),"boolean"==typeof t["background.enabled"]&&(t["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:a.WillSendEvent});o.assign(b.prototype,i(52)),o.assign(b.prototype,i(55)),o.assign(b.prototype,i(56)),o.assign(b.prototype,i(57)),o.assign(b.prototype,i(58)),o.assign(b.prototype,i(59)),o.assign(b.prototype,i(60)),o.assign(b.prototype,i(61)),o.assign(b.prototype,i(62)),t.exports=b},function(t,e,i){var n=i(6),s=i(3),r=n.extend({_services:[s.Service.INIT,s.Service.START,s.Service.OFFLINE_EVENTS],isBlocking:function(t){if(this._isBusy&&null!=t)if(-1!==this._services.indexOf(t.service))this.done();else if(t.service===s.Service.ERROR)return!1;return n.prototype.isBlocking.apply(this,arguments)}});t.exports=r},function(t,e,i){var n=i(1),s=i(13),r=n.extend({constructor:function(){this.storage=new s("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var t=this._getValidId();this.storage.setLocal(t,""),this.viewList.push(t),this.storage.setLocal("views",this.viewList),this.actualView=t},addEvent:function(t,e){if("/start"===t&&this._newView(),"/init"===t)return null;if(!this.actualView)return null;var i='{"request":"'+t.slice(1)+'",';for(var n in i+='"unixtime":'+Date.now()+",",e){if(void 0===e[n])break;i+='"'+n+'":',"code"===n?i+='"CODE_PLACEHOLDER",':"sessionId"===n?i+='"SESSION_PLACEHOLDER",':"parentId"===n?i+='"PARENT_PLACEHOLDER",':"sessionRoot"===n?i+='"ROOT_PLACEHOLDER",':"string"==typeof e[n]?i+='"'+e[n]+'",':"object"==typeof e[n]?i+='"'+JSON.stringify(e[n]).replace(/"/g,'\\"')+'",':i+=e[n]+","}i=i.slice(0,-1),i+="}";var s=this.storage.getLocal(this.actualView);""!==s&&(s+=","),this.storage.setLocal(this.actualView,s+i)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var t=0;;){var e=this.viewList[t];if(!this.givenIds.includes(e))return this.givenIds.push(e),["["+this.storage.getLocal(e)+"]",e];t++}return[null,null]},removeView:function(t){this.storage.removeLocal(t);var e=this.viewList.indexOf(t);-1!==e&&this.viewList.splice(e,1),-1!==(e=this.givenIds.indexOf(t))&&this.givenIds.splice(e,1),this.storage.setLocal("views",this.viewList.toString()),t===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var t="";this.storage.getLocal("views")?t=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===t?this.viewList=[]:"function"==typeof t.split&&(this.viewList=t.split(","))},_getValidId:function(){var t=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(t)>=0?this._getValidId():t},sent:function(){this.givenIds=[]}});t.exports=r},function(t,e,i){var n=i(6).extend({isBlocking:function(t){return!t.params.sessionId}});t.exports=n},function(t,e,i){var n=i(1),s=i(2),r=n.extend({constructor:function(t){try{this._plugin=t,this.isBlocked=null,this.xhr=null;try{XMLHttpRequest?this.xhr=new XMLHttpRequest:this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return null}if(this.xhr.addEventListener){var e=s.addProtocol("ww.zxcvwwds.com/ww/wwds/-imwwge-wwd_wwds.html",this._plugin.options["app.https"]);this.xhr.open("GET",e.replace(/ww/g,"a"),!1),this.xhr.addEventListener("load",this.notBlocked.bind(this)),this.xhr.addEventListener("error",this.blocked.bind(this)),this.xhr.send()}else this.isBlocked=!1}catch(t){this.isBlocked=!0}},blocked:function(t){this.isBlocked=!0},notBlocked:function(t){this.isBlocked=!1}});t.exports=r},function(t,e,i){var n=i(1).extend({constructor:function(t){this.pluginref=t,this.listenerReference=this._changeListener.bind(this),this.isEnabled=!1},startDetection:function(){this.isEnabled||"undefined"==typeof window||(window.addEventListener("scroll",this.listenerReference),window.addEventListener("resize",this.listenerReference),this.isEnabled=!0)},stopDetection:function(){this.isEnabled&&"undefined"!=typeof window&&(window.removeEventListener("scroll",this.listenerReference),window.removeEventListener("resize",this.listenerReference),this.isEnabled=!1)},_changeListener:function(){var t=this.pluginref.getAdsAdapter();t&&t.flags.isStarted&&(t.getIsVisible()?t.startChronoView():t.stopChronoView())}});t.exports=n},function(t,e,i){var n=i(1).extend({constructor:function(t){this.plugin=t},getAllData:function(){var t=this.getNonRandomData();return t.timestamp=this.getTimestamp(),t},getNonRandomData:function(){var t={};return t.userAgent=this.getUserAgent(),t.threads=this.getVirtualCores(),t.language=this.getLanguage(),t.langList=this.getAvailableLanguages(),t.resolution=this.getResolution(),t.colorDepth=this.getColorDepth(),t.deviceMemory=this.getMemory(),t.touchscreen=this.getTouchscreen(),t.localStorage=this.getLocalStorage(),t.sessionStorage=this.getSessionStorage(),t.cookiesAvailable=this.getCookiesAvailable(),t.flashAvailable=this.getHasFlash(),t.timeZone=this.getTimeZone(),t.plugins=this.getPluginList(),t},getUserAgent:function(){try{return this._navigatorCheck()?navigator.userAgent:null}catch(t){return null}},getVirtualCores:function(){try{return this._navigatorCheck()?navigator.hardwareConcurrency:null}catch(t){return null}},getLanguage:function(){try{return this._navigatorCheck()?navigator.language:null}catch(t){return null}},getAvailableLanguages:function(){try{return this._navigatorCheck()?navigator.languages:null}catch(t){return null}},getResolution:function(){try{return this._navigatorCheck()&&navigator.screen?navigator.screen.width.toString()+navigator.screen.height.toString():null}catch(t){return null}},getColorDepth:function(){try{return this._navigatorCheck()&&navigator.screen?navigator.screen.colorDepth:null}catch(t){return null}},getMemory:function(){try{return this._navigatorCheck()?navigator.deviceMemory:null}catch(t){return null}},getTouchscreen:function(){try{return this._navigatorCheck()?navigator.maxTouchPoints:null}catch(t){return!1}},getLocalStorage:function(){try{return"undefined"!=typeof localStorage}catch(t){return!1}},getSessionStorage:function(){try{return"undefined"!=typeof sessionStorage}catch(t){return!1}},getCookiesAvailable:function(){try{return!!this._navigatorCheck()&&navigator.cookieEnabled}catch(t){return!1}},getHasFlash:function(){try{return!!this._navigatorCheck()&&(void 0!==navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]||"undefined"!=typeof window&&window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){return!1}},getPluginList:function(){try{if(!this._navigatorCheck()||!navigator.plugins||0===navigator.plugins.length)return null;for(var t="",e=0;e<navigator.plugins.length;e++)t+=navigator.plugins[e].description+" "+navigator.plugins[e].filename+" "+navigator.plugins[e].name+" ";return t}catch(t){return null}},getTimeZone:function(){try{return(new Date).getTimezoneOffset().toString()}catch(t){return null}},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator}});t.exports=n},function(t,e){t.exports=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,n,s,r,a;return s=2147483648&t,r=2147483648&e,a=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(n=1073741824&e)?2147483648^a^s^r:i|n?1073741824&a?3221225472^a^s^r:1073741824^a^s^r:a^s^r}function n(t,n,s,r,a,o,d){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(n,s,r),a),d)),i(e(t,o),n)}function s(t,n,s,r,a,o,d){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(n,s,r),a),d)),i(e(t,o),n)}function r(t,n,s,r,a,o,d){return t=i(t,i(i(function(t,e,i){return t^e^i}(n,s,r),a),d)),i(e(t,o),n)}function a(t,n,s,r,a,o,d){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(n,s,r),a),d)),i(e(t,o),n)}function o(t){var e,i="",n="";for(e=0;e<=3;e++)i+=(n="0"+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return i}var d,u,h,c,l,p,f,g,m,_=Array();for(_=function(t){for(var e,i=t.length,n=i+8,s=16*((n-n%64)/64+1),r=Array(s-1),a=0,o=0;o<i;)a=o%4*8,r[e=(o-o%4)/4]=r[e]|t.charCodeAt(o)<<a,o++;return a=o%4*8,r[e=(o-o%4)/4]=r[e]|128<<a,r[s-2]=i<<3,r[s-1]=i>>>29,r}(t=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t)),p=1732584193,f=4023233417,g=2562383102,m=271733878,d=0;d<_.length;d+=16)u=p,h=f,c=g,l=m,p=n(p,f,g,m,_[d+0],7,3614090360),m=n(m,p,f,g,_[d+1],12,3905402710),g=n(g,m,p,f,_[d+2],17,606105819),f=n(f,g,m,p,_[d+3],22,3250441966),p=n(p,f,g,m,_[d+4],7,4118548399),m=n(m,p,f,g,_[d+5],12,1200080426),g=n(g,m,p,f,_[d+6],17,2821735955),f=n(f,g,m,p,_[d+7],22,4249261313),p=n(p,f,g,m,_[d+8],7,1770035416),m=n(m,p,f,g,_[d+9],12,2336552879),g=n(g,m,p,f,_[d+10],17,4294925233),f=n(f,g,m,p,_[d+11],22,2304563134),p=n(p,f,g,m,_[d+12],7,1804603682),m=n(m,p,f,g,_[d+13],12,4254626195),g=n(g,m,p,f,_[d+14],17,2792965006),p=s(p,f=n(f,g,m,p,_[d+15],22,1236535329),g,m,_[d+1],5,4129170786),m=s(m,p,f,g,_[d+6],9,3225465664),g=s(g,m,p,f,_[d+11],14,643717713),f=s(f,g,m,p,_[d+0],20,3921069994),p=s(p,f,g,m,_[d+5],5,3593408605),m=s(m,p,f,g,_[d+10],9,38016083),g=s(g,m,p,f,_[d+15],14,3634488961),f=s(f,g,m,p,_[d+4],20,3889429448),p=s(p,f,g,m,_[d+9],5,568446438),m=s(m,p,f,g,_[d+14],9,3275163606),g=s(g,m,p,f,_[d+3],14,4107603335),f=s(f,g,m,p,_[d+8],20,1163531501),p=s(p,f,g,m,_[d+13],5,2850285829),m=s(m,p,f,g,_[d+2],9,4243563512),g=s(g,m,p,f,_[d+7],14,1735328473),p=r(p,f=s(f,g,m,p,_[d+12],20,2368359562),g,m,_[d+5],4,4294588738),m=r(m,p,f,g,_[d+8],11,2272392833),g=r(g,m,p,f,_[d+11],16,1839030562),f=r(f,g,m,p,_[d+14],23,4259657740),p=r(p,f,g,m,_[d+1],4,2763975236),m=r(m,p,f,g,_[d+4],11,1272893353),g=r(g,m,p,f,_[d+7],16,4139469664),f=r(f,g,m,p,_[d+10],23,3200236656),p=r(p,f,g,m,_[d+13],4,681279174),m=r(m,p,f,g,_[d+0],11,3936430074),g=r(g,m,p,f,_[d+3],16,3572445317),f=r(f,g,m,p,_[d+6],23,76029189),p=r(p,f,g,m,_[d+9],4,3654602809),m=r(m,p,f,g,_[d+12],11,3873151461),g=r(g,m,p,f,_[d+15],16,530742520),p=a(p,f=r(f,g,m,p,_[d+2],23,3299628645),g,m,_[d+0],6,4096336452),m=a(m,p,f,g,_[d+7],10,1126891415),g=a(g,m,p,f,_[d+14],15,2878612391),f=a(f,g,m,p,_[d+5],21,4237533241),p=a(p,f,g,m,_[d+12],6,1700485571),m=a(m,p,f,g,_[d+3],10,2399980690),g=a(g,m,p,f,_[d+10],15,4293915773),f=a(f,g,m,p,_[d+1],21,2240044497),p=a(p,f,g,m,_[d+8],6,1873313359),m=a(m,p,f,g,_[d+15],10,4264355552),g=a(g,m,p,f,_[d+6],15,2734768916),f=a(f,g,m,p,_[d+13],21,1309151649),p=a(p,f,g,m,_[d+4],6,4149444226),m=a(m,p,f,g,_[d+11],10,3174756917),g=a(g,m,p,f,_[d+2],15,718787259),f=a(f,g,m,p,_[d+9],21,3951481745),p=i(p,u),f=i(f,h),g=i(g,c),m=i(m,l);return(o(p)+o(f)+o(g)+o(m)).toLowerCase()}},function(t,e,i){var n=i(0),s=i(3),r=i(15),a={setAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdapter(),this._adapter=t,t.plugin=this,t.on(r.Event.START,this._startListener.bind(this)),t.on(r.Event.JOIN,this._joinListener.bind(this)),t.on(r.Event.PAUSE,this._pauseListener.bind(this)),t.on(r.Event.RESUME,this._resumeListener.bind(this)),t.on(r.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),t.on(r.Event.SEEK_END,this._seekEndListener.bind(this)),t.on(r.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),t.on(r.Event.BUFFER_END,this._bufferEndListener.bind(this)),t.on(r.Event.ERROR,this._errorListener.bind(this)),t.on(r.Event.STOP,this._stopListener.bind(this)),t.on(r.Event.VIDEO_EVENT,this._videoEventListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(r.Event.START,this._startListener),this._adapter.off(r.Event.JOIN,this._joinListener),this._adapter.off(r.Event.PAUSE,this._pauseListener),this._adapter.off(r.Event.RESUME,this._resumeListener),this._adapter.off(r.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(r.Event.SEEK_END,this._seekEndListener),this._adapter.off(r.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(r.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(r.Event.ERROR,this._errorListener),this._adapter.off(r.Event.STOP,this._stopListener),this._adapter.off(r.Event.VIDEO_EVENT,this._videoEventListener),this._adapter=null)},_startListener:function(t){this.isInitiated?0!==this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime):(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{},i=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();(i=!this.options.forceInit&&(i&&this._isExtraMetadataReady()))&&!this.isInitiated?(this._send(s.WillSendEvent.WILL_SEND_START,s.Service.START,e),this._adSavedError(),this._adSavedManifest(),n.notice(s.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0):this.isInitiated||(this.isInitiated=!0,this._adapter.chronos.join.start(),this._send(s.WillSendEvent.WILL_SEND_INIT,s.Service.INIT,e),this._adSavedError(),this._adSavedManifest(),n.notice(s.Service.INIT+" "+(e.title||e.mediaResource)))},_retryStart:function(t){this._isExtraMetadataReady()&&(this._send(s.WillSendEvent.WILL_SEND_START,s.Service.START,{}),this.startDelayed=!1)},_joinListener:function(t){var e=t.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this._adsAdapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._totalPrerollsTime||0),(new Date).getTime()),this._totalPrerollsTime=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(s.WillSendEvent.WILL_SEND_START,s.Service.START,e):this.startDelayed=!0,this._adSavedError(),this._adSavedManifest(),n.notice(s.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0),e=t.data.params||{},this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireBreakStop(),this._send(s.WillSendEvent.WILL_SEND_JOIN,s.Service.JOIN,e),n.notice(s.Service.JOIN+" "+e.joinDuration+"ms"))},_pauseListener:function(t){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var e=t.data.params||{};this._send(s.WillSendEvent.WILL_SEND_PAUSE,s.Service.PAUSE,e),n.notice(s.Service.PAUSE+" at "+e.playhead+"s")},_resumeListener:function(t){this._adsAdapter&&this.isBreakStarted&&!this._adsAdapter.flags.isStarted&&this._adsAdapter.fireBreakStop();var e=t.data.params||{};this._send(s.WillSendEvent.WILL_SEND_RESUME,s.Service.RESUME,e),n.notice(s.Service.RESUME+" "+e.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Seek Begin")},_seekEndListener:function(t){var e=t.data.params||{};this._send(s.WillSendEvent.WILL_SEND_SEEK,s.Service.SEEK,e),n.notice(s.Service.SEEK+" to "+e.playhead+" in "+e.seekDuration+"ms")},_bufferBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Buffer Begin")},_bufferEndListener:function(t){var e=t.data.params||{};this._send(s.WillSendEvent.WILL_SEND_BUFFER,s.Service.BUFFER,e),n.notice(s.Service.BUFFER+" to "+e.playhead+" in "+e.bufferDuration+"ms")},_errorListener:function(t){this._blockError(t.data.params)||(this.fireError(t.data.params||{}),this._adSavedError(),this._adSavedManifest())},_blockError:function(t){var e=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===t.errorCode&&this._lastErrorParams.msg===t.msg)&&this._lastErrorTime+5e3>e?(this._lastErrorTime=e,!0):(this._lastErrorTime=e,this._lastErrorParams=t,!1)},_stopListener:function(t){this.fireStop(t.data.params||{})},_isStopReady:function(t){return!(this.options["ad.expectedPattern"]&&this.options["ad.expectedPattern"].post&&this.options["ad.expectedPattern"].post[0]>this.playedPostrolls)},_videoEventListener:function(t){this._send(s.WillSendEvent.VIDEO_EVENT,s.Service.VIDEO_EVENT,t.data.params)},_isExtraMetadataReady:function(t){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var e=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(t){if(e.hasOwnProperty(t))return!!this[e[t]]()}.bind(this)).indexOf(!1)<0}};t.exports=a},function(t,e,i){var n=i(1),s=i(7),r=n.extend({constructor:function(){this.reset()},reset:function(){this.join=new s,this.seek=new s,this.pause=new s,this.buffer=new s,this.total=new s,this.viewedMax=[]}});t.exports=r},function(t,e,i){var n=i(1).extend({constructor:function(){this.reset()},reset:function(){this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1}});t.exports=n},function(t,e,i){var n=i(2),s=i(8),r={getHost:function(){var t=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(t=this.viewTransform.response.host),n.addProtocol(n.stripProtocol(t),this.options["app.https"])},getUserType:function(){return this.options["user.type"]},isParseHls:function(){return this.options["parse.hls"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isLocHeader:function(){return this.options["parse.locationHeader"]},isDash:function(){return this.options["parse.dash"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]},getExtraparam1:function(){return this.options["content.customDimension.1"]},getExtraparam2:function(){return this.options["content.customDimension.2"]},getExtraparam3:function(){return this.options["content.customDimension.3"]},getExtraparam4:function(){return this.options["content.customDimension.4"]},getExtraparam5:function(){return this.options["content.customDimension.5"]},getExtraparam6:function(){return this.options["content.customDimension.6"]},getExtraparam7:function(){return this.options["content.customDimension.7"]},getExtraparam8:function(){return this.options["content.customDimension.8"]},getExtraparam9:function(){return this.options["content.customDimension.9"]},getExtraparam10:function(){return this.options["content.customDimension.10"]},getExtraparam11:function(){return this.options["content.customDimension.11"]},getExtraparam12:function(){return this.options["content.customDimension.12"]},getExtraparam13:function(){return this.options["content.customDimension.13"]},getExtraparam14:function(){return this.options["content.customDimension.14"]},getExtraparam15:function(){return this.options["content.customDimension.15"]},getExtraparam16:function(){return this.options["content.customDimension.16"]},getExtraparam17:function(){return this.options["content.customDimension.17"]},getExtraparam18:function(){return this.options["content.customDimension.18"]},getExtraparam19:function(){return this.options["content.customDimension.19"]},getExtraparam20:function(){return this.options["content.customDimension.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]},getPluginInfo:function(){return{lib:s,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var t={};return this.getDeviceCode()&&(t.deviceCode=this.getDeviceCode()),this.getModel()&&(t.model=this.getModel()),this.getBrand()&&(t.brand=this.getBrand()),this.getDeviceType()&&(t.deviceType=this.getDeviceType()),this.getDeviceName()&&(t.deviceName=this.getDeviceName()),this.getOsName()&&(t.osName=this.getOsName()),this.getOsVersion()&&(t.osVersion=this.getOsVersion()),this.getBrowserName()&&(t.browserName=this.getBrowserName()),this.getBrowserVersion()&&(t.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(t.browserType=this.getBrowserType()),this.getBrowserEngine()&&(t.browserEngine=this.getBrowserEngine()),t!=={}?t:null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]},getAnonymousUser:function(){return this.options["user.anonymousId"]},getEmail:function(){return this.options["user.email"]},getReferer:function(){if(this.options.referer)return this.options.referer;var t="";return"undefined"!=typeof window&&window.location&&(t=window.location.href),t},getReferral:function(){return"undefined"!=typeof window&&window.document?window.document.referrer:null},getLanguage:function(){return"undefined"!=typeof navigator?navigator.language:null},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){return this.offlineStorage.getView()},getExperiments:function(){return this.options.experiments.length>0?this.options.experiments:null},getDeviceUUID:function(){var t=null;return this.options["device.isAnonymous"]||(t=this.uuidGenerator.getKey()),t},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]},getIsBlocked:function(){return this.blockDetector.isBlocked}};t.exports=r},function(t,e,i){var n=i(0),s=i(2),r=i(17),a=i(8),o={getPlayhead:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayhead()}catch(t){n.warn("An error occurred while calling getPlayhead",t)}return s.parseNumber(t,0)},getPlayrate:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayrate(),this._adapter.flags&&this._adapter.flags.isPaused&&(t=0)}catch(t){n.warn("An error occured while calling getPlayrate",t)}return t},getFramesPerSecond:function(){var t=this.options["content.fps"];if(null===t&&this._adapter)try{t=this._adapter.getFramesPerSecond()}catch(t){n.warn("An error occured while calling getFramesPerSecond",t)}return t},getDroppedFrames:function(){var t=null;if(this._adapter)try{t=this._adapter.getDroppedFrames()}catch(t){n.warn("An error occured while calling getDroppedFrames",t)}return t||(t=this.getWebkitDroppedFrames()),s.parseNumber(t,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var t=this.options["content.duration"];if(null===t&&this._adapter)try{t=this._adapter.getDuration()}catch(t){n.warn("An error occured while calling getDuration",t)}return 0===t&&(t=null),s.parseNumber(Math.round(t),null)},getBitrate:function(){var t=this.options["content.bitrate"];if(null===t&&this._adapter){try{t=this._adapter.getBitrate()}catch(t){n.warn("An error occured while calling getBitrate",t)}t&&-1!==t||(t=this.getWebkitBitrate())}return s.parseNumber(t,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getThroughput:function(){var t=this.options["content.throughput"];if(null===t&&this._adapter)try{t=this._adapter.getThroughput()}catch(t){n.warn("An error occured while calling getThroughput",t)}return s.parseNumber(t,-1)},getRendition:function(){var t=this.options["content.rendition"];if(null===t&&this._adapter)try{t=this._adapter.getRendition()}catch(t){n.warn("An error occured while calling getRendition",t)}return t},getTitle:function(){var t=this.options["content.title"];if(null===t&&this._adapter)try{t=this._adapter.getTitle()}catch(t){n.warn("An error occured while calling getTitle",t)}return t},getTitle2:function(){var t=this.options["content.program"];if(null===t&&this._adapter)try{t=this._adapter.getTitle2()}catch(t){n.warn("An error occured while calling getTitle2",t)}return t},getIsLive:function(){var t=this.options["content.isLive"];if(null===t&&this._adapter)try{t=this._adapter.getIsLive()}catch(t){n.warn("An error occured while calling getIsLive",t)}return t||!1},getResource:function(){var t=null;if(null===(t=this.options["content.resource"])&&this._adapter)try{t=this._adapter.getResource()}catch(e){n.warn("An error occured while calling getResource",e),t=null}return t||null},getParsedResource:function(){var t=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(t=this.resourceTransform.getResource()),t},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getPlayerVersion",t)}return t},getPlayerName:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerName()}catch(t){n.warn("An error occured while calling getPlayerName",t)}return t},getCdn:function(){var t=null;return this.resourceTransform.isBlocking()||(t=this.resourceTransform.getCdnName()),t||this.options["content.cdn"]},getPluginVersion:function(){var t=this.getAdapterVersion();return t||(t=a+"-adapterless"),t},getLibVersion:function(){return a},getAdapterVersion:function(){var t=null;if(this._adapter)try{t=this._adapter.getVersion()}catch(t){n.warn("An error occured while calling getPluginVersion",t)}return t},getCdnTraffic:function(){var t=r.getCdnTraffic();if(this._adapter)try{t=this._adapter.getCdnTraffic()||t}catch(t){n.warn("An error occured while calling getCdnTraffic",t)}return t},getP2PTraffic:function(){var t=r.getP2PTraffic();if(this._adapter)try{t=this._adapter.getP2PTraffic()||t}catch(t){n.warn("An error occured while calling getP2PTraffic",t)}return t},getUploadTraffic:function(){var t=r.getUploadTraffic();if(this._adapter)try{t=this._adapter.getUploadTraffic()||t}catch(t){n.warn("An error occured while calling getUploadTraffic",t)}return t},getIsP2PEnabled:function(){var t=r.getIsP2PEnabled();if(this._adapter)try{t=this._adapter.getIsP2PEnabled()||t}catch(t){n.warn("An error occured while calling getIsP2PEnabled",t)}return t},getStreamingProtocol:function(){var t=this.options["content.streamingProtocol"];return"string"!=typeof t?null:"HDS"!==(t=t.toUpperCase())&&"HLS"!==t&&"MSS"!==t&&"DASH"!==t&&"RTMP"!==t&&"RTP"!==t&&"RTSP"!==t?(n.warn("Streaming protocol "+t+" is not a valid value"),null):t},getHouseholdId:function(){var t=null;if(this._adapter)try{t=this._adapter.getHouseholdId()}catch(t){n.warn("An error occurred while calling getHouseholdId",t)}return t},getLatency:function(){var t=null;if(this._adapter)try{t=this._adapter.getLatency()}catch(t){n.warn("An error occurred while calling getLatency",t)}return t},getPacketLoss:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketLoss()}catch(t){n.warn("An error occurred while calling getPacketLoss",t)}return t},getPacketSent:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketSent()}catch(t){n.warn("An error occurred while calling getPacketSent",t)}return t},getVideoMetrics:function(){var t=this._adapter?this._adapter.getMetrics():null;for(var e in t=t||this.options["content.metrics"])if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){return this.options["content.playbackType"]?this.options["content.playbackType"]:this.getIsLive()?"Live":"VoD"},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this.options["content.encoding.videoCodec"]},getAudioCodec:function(){return this.options["content.encoding.audioCodec"]},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]}};t.exports=o},function(t,e,i){var n=i(0),s=i(3),r=i(15),a={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdsAdapter(),t.plugin=this,this._adsAdapter=t,this._adsAdapter.on(r.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(r.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(r.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(r.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(r.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(r.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(r.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(r.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(r.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(r.Event.MANIFEST,this._adManifestListener.bind(this)),this._adsAdapter.on(r.Event.PODSTART,this._adBreakStartListener.bind(this)),this._adsAdapter.on(r.Event.PODSTOP,this._adBreakStopListener.bind(this)),this._adsAdapter.on(r.Event.QUARTILE,this._adQuartileListener.bind(this)),this.resizeScrollDetector.startDetection())},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(r.Event.START,this._adStartListener),this._adsAdapter.off(r.Event.JOIN,this._adJoinListener),this._adsAdapter.off(r.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(r.Event.RESUME,this._adResumeListener),this._adsAdapter.off(r.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(r.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(r.Event.STOP,this._adStopListener),this._adsAdapter.off(r.Event.ERROR,this._adErrorListener),this._adsAdapter.off(r.Event.CLICK,this._adClickListener),this._adsAdapter.off(r.Event.MANIFEST,this._adManifestListener),this._adsAdapter.off(r.Event.PODSTART,this._adBreakStartListener),this._adsAdapter.off(r.Event.PODSTOP,this._adBreakStopListener),this._adsAdapter.off(r.Event.QUARTILE,this._adQuartileListener),this.resizeScrollDetector.stopDetection(),this._adsAdapter=null)},_adStartListener:function(t){this._adapter?(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this.isInitiated||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),this._adsAdapter.chronos.viewedMax=[]);var e=t.data.params||{};(e.adNumber=this.requestBuilder.getNewAdNumber(),e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.options["ad.ignore"])||((this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._send(s.WillSendEvent.WILL_SEND_AD_START,s.Service.AD_START,e),n.notice(s.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")):(this.adInitSent=!0,this._send(s.WillSendEvent.WILL_SEND_AD_INIT,s.Service.AD_INIT,e),n.notice(s.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")))},_adJoinListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||!this.adInitSent||this.adStartSent||(this._send(s.WillSendEvent.WILL_SEND_AD_START,s.Service.AD_START,e),n.notice(s.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")),this._adsAdapter.startChronoView(),this.adConnected&&(this._adsAdapter.chronos.join.startTime=this.adConnectedTime,this._adsAdapter.chronos.total.startTime=this.adConnectedTime,this.adConnectedTime=0,this.adConnected=!1),this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_JOIN,s.Service.AD_JOIN,e),n.notice(s.Service.AD_JOIN+" "+e.adJoinDuration+"ms"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,this._adsAdapter.stopChronoView(),this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_PAUSE,s.Service.AD_PAUSE,e),n.notice(s.Service.AD_PAUSE+" at "+e.adPlayhead+"s")},_adResumeListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this._adsAdapter.startChronoView(),this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_RESUME,s.Service.AD_RESUME,e),n.notice(s.Service.AD_RESUME+" "+e.adPauseDuration+"ms")},_adBufferBeginListener:function(t){n.notice("Ad Buffer Begin"),this._adsAdapter.stopChronoView(),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(t){var e=t.data.params||{};this._adsAdapter.startChronoView(),e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_BUFFER,s.Service.AD_BUFFER,e),n.notice(s.Service.AD_BUFFER+" "+e.adBufferDuration+"ms")},_adStopListener:function(t){this._adsAdapter.stopChronoView(),this._adsAdapter.flags.reset(),this._totalPrerollsTime=(this._totalPrerollsTime||0)+this._adsAdapter.chronos.total.getDeltaTime();var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.requestBuilder.lastSent.adPosition===s.AdPosition.Postroll&&this.playedPostrolls++,this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_STOP,s.Service.AD_STOP,e),n.notice(s.Service.AD_STOP+" "+e.adTotalDuration+"ms"),this.options["ad.expectedPattern"]&&this.options["ad.expectedPattern"].post&&this.options["ad.expectedPattern"].post[0]===this.playedPostrolls&&e.adPosition===s.AdPosition.Postroll&&this.fireStop(),this.adConnected=!0,this.adConnectedTime=(new Date).getTime()},_adErrorListener:function(t){var e=t.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this.isInitiated?this._blockAdError(t.data.params)?null:(this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart()),this._adsAdapter&&this._adsAdapter.flags.isStarted?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_ERROR,s.Service.AD_ERROR,e),void n.notice(s.Service.AD_ERROR)):(this._savedAdError=t,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_adSavedManifest:function(){this._savedAdManifest&&(this._adManifestListener(this._savedAdManifest),this._savedAdManifest=null)},_blockAdError:function(t){var e=Date.now();return!!this._lastAdErrorParams&&(this._lastAdErrorParams.errorCode===t.errorCode&&this._lastAdErrorParams.msg===t.msg)&&this._lastAdErrorTime+5e3>e?(this._lastAdErrorTime=e,!0):(this._lastAdErrorTime=e,this._lastAdErrorParams=t,!1)},_adClickListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,this._adsAdapter.stopChronoView(),this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_CLICK,s.Service.AD_CLICK,e),n.notice(s.Service.AD_CLICK)},_adManifestListener:function(t){if(!this.isAdsManifestSent){if(this._adapter&&!this._adapter.flags.isStarted&&!this.isInitiated)return this._savedAdManifest=t,null;var e=t.data.params||{};this.isAdsManifestSent=!0,this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_MANIFEST,s.Service.AD_MANIFEST,e),n.notice(s.Service.AD_MANIFEST)}},_adBreakStartListener:function(t){var e=t.data.params||{};this.requestBuilder.lastSent.breakNumber?this.requestBuilder.lastSent.breakNumber++:this.requestBuilder.lastSent.breakNumber=1,e.breakNumber=this.requestBuilder.lastSent.breakNumber,this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_POD_START,s.Service.AD_POD_START,e),n.notice(s.Service.AD_POD_START),this.adConnected=!1},_adBreakStopListener:function(t){var e=t.data.params||{};e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.breakPosition=this.requestBuilder.lastSent.breakPosition,this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_POD_STOP,s.Service.AD_POD_STOP,e),n.notice(s.Service.AD_POD_STOP),this.adConnected=!1},_adQuartileListener:function(t){var e=t.data.params||{};e.quartile&&(e.adNumber=this.requestBuilder.lastSent.adNumber,e.adPosition=this.requestBuilder.lastSent.adPosition,e.breakNumber=this.requestBuilder.lastSent.breakNumber,e.breakPosition=this.requestBuilder.lastSent.breakPosition,this.options["ad.ignore"]||this._send(s.WillSendEvent.WILL_SEND_AD_QUARTILE,s.Service.AD_QUARTILE,e),n.notice(s.Service.AD_QUARTILE))}};t.exports=a},function(t,e,i){var n=i(0),s=i(2),r=i(3),a={getAdPlayerVersion:function(){var t="";if(this._adsAdapter)try{t=this._adsAdapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getAdPlayerVersion",t)}return t},getAdPosition:function(){var t=r.AdPosition.Preroll;if(this._adsAdapter)try{var e=this._adsAdapter.getPosition();r.AdPosition.Preroll!==e&&r.AdPosition.Midroll!==e&&r.AdPosition.Postroll!==e||(t=e)}catch(t){n.warn("An error occured while calling getAdPosition",t)}return!t&&this._adapter&&(t=this._adapter.flags.isJoined?r.AdPosition.Midroll:r.AdPosition.Preroll),t},getAdPlayhead:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getPlayhead()}catch(t){n.warn("An error occured while calling getAdPlayhead",t)}return s.parseNumber(t,0)},getAdDuration:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getDuration()}catch(t){n.warn("An error occured while calling getAdDuration",t)}return s.parseNumber(t,0)},getAdBitrate:function(){var t=null;if(this._adsAdapter){try{t=this._adsAdapter.getBitrate()}catch(t){n.warn("An error occured while calling getAdBitrate",t)}t&&-1!==t||(t=this.getWebkitAdBitrate())}return s.parseNumber(t,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getAdTitle:function(){var t=null;if(this.options["ad.title"])return this.options["ad.title"];if(this._adsAdapter)try{t=this._adsAdapter.getTitle()}catch(t){n.warn("An error occured while calling getAdTitle",t)}return t},getAdResource:function(){var t=null;if(this.options["ad.resource"])return this.options["ad.resource"];if(this._adsAdapter)try{t=this._adsAdapter.getResource()}catch(t){n.warn("An error occured while calling getAdResource",t)}return t},getAdCampaign:function(){var t=null;if(this.options["ad.campaign"])return this.options["ad.campaign"];if(this._adsAdapter)try{t=this._adsAdapter.getCampaign()}catch(t){n.warn("An error occured while calling getCampaign",t)}return t},getAdCreativeId:function(){var t=null;if(this.options["ad.creativeId"])return this.options["ad.creativeId"];if(this._adsAdapter)try{t=this._adsAdapter.getCreativeId()}catch(t){n.warn("An error occured while calling getCreativeId",t)}return t},getAdProvider:function(){var t=null;if(this.options["ad.provider"])return this.options["ad.provider"];if(this._adsAdapter)try{t=this._adsAdapter.getProvider()}catch(t){n.warn("An error occured while calling getProvider",t)}return t},getAdAdapterVersion:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getVersion()}catch(t){n.warn("An error occured while calling getAdsAdapterVersion",t)}return t},getAdMetadata:function(){return this.options["ad.metadata"]},getGivenBreaks:function(){var t=null;if(this.options["ad.givenBreaks"])t=this.options["ad.givenBreaks"];else if(this._adsAdapter)try{t=this._adsAdapter.getGivenBreaks()}catch(t){n.warn("An error occured while calling getGivenBreaks",t)}return t},getExpectedBreaks:function(){var t=null;if(this.options["ad.expectedBreaks"])t=this.options["ad.expectedBreaks"];else if(this.options["ad.expectedPattern"])t=0,t=this.options["ad.expectedPattern"].pre?this.options["ad.expectedPattern"].pre.length:0,t+=this.options["ad.expectedPattern"].mid?this.options["ad.expectedPattern"].mid.length:0,t+=this.options["ad.expectedPattern"].post?this.options["ad.expectedPattern"].post.length:0;else if(this._adsAdapter)try{t=this._adsAdapter.getExpectedBreaks()}catch(t){n.warn("An error occured while calling expectedBreaks",t)}return t},getExpectedPattern:function(){var t=null;if(this.options["ad.expectedPattern"])t=this.options["ad.expectedPattern"];else if(this._adsAdapter)try{t=this._adsAdapter.getExpectedPattern()}catch(t){n.warn("An error occured while calling expectedPattern",t)}return t},getBreaksTime:function(){var t=null;if(this.options["ad.breaksTime"])t=this.options["ad.breaksTime"];else if(this._adsAdapter)try{t=this._adsAdapter.getBreaksTime()}catch(t){n.warn("An error occured while calling breaksTime",t)}return t},getGivenAds:function(){var t=null;if(this.options["ad.givenAds"])t=this.options["ad.givenAds"];else if(this._adsAdapter)try{t=this._adsAdapter.getGivenAds()}catch(t){n.warn("An error occured while calling givenAds",t)}return t},getExpectedAds:function(){var t=null;try{if(this._adsAdapter)if(this.options["ad.expectedPattern"]&&this.getAdPosition()){var e=[];if(this.options["ad.expectedPattern"].pre&&(e=e.concat(this.options["ad.expectedPattern"].pre)),this.options["ad.expectedPattern"].mid&&(e=e.concat(this.options["ad.expectedPattern"].mid)),this.options["ad.expectedPattern"].post&&(e=e.concat(this.options["ad.expectedPattern"].post)),e.length>0){var i=this.requestBuilder.lastSent.breakNumber;i>e.length&&(i=e.length),t=e[i-1]}}else t=this._adsAdapter.getExpectedAds()}catch(t){n.warn("An error occured while calling expectedAds",t)}return t},getAdsExpected:function(){var t=null;try{t=this.getExpectedPattern()||this.getGivenAds()||!1}catch(t){n.warn("An error occured while calling givenAds or expectedPattern",t)}return t},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1},getAdViewedDuration:function(){var t=0;return this._adsAdapter&&this._adsAdapter.chronos.viewedMax.length>0&&this._adsAdapter.chronos.viewedMax.forEach((function(e){t+=e.getDeltaTime(!1)})),t},getAdViewability:function(){var t=0;return this._adsAdapter&&this._adsAdapter.chronos.viewedMax.length>0&&this._adsAdapter.chronos.viewedMax.forEach((function(e){e&&e.getDeltaTime(!1)>t&&(t=e.getDeltaTime(!1))})),t},getAudioEnabled:function(){var t=null;try{this._adsAdapter&&(t=this._adsAdapter.getAudioEnabled())}catch(t){n.warn("An error occured while calling isAudioEnabled",t)}return t},getIsSkippable:function(){var t=null;try{this._adsAdapter&&(t=this._adsAdapter.getIsSkippable())}catch(t){n.warn("An error occured while calling isSkippable",t)}return t},getIsFullscreen:function(){var t=null;try{this._adsAdapter&&(t=this._adsAdapter.getIsFullscreen())}catch(t){n.warn("An error occured while calling isFullcreen",t)}return t}};t.exports=a},function(t,e,i){var n=i(0),s=i(3),r={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(t){var e={diffTime:t,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(e=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(e,["pauseDuration"]):this.requestBuilder.fetchParams(e,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(e=this.requestBuilder.fetchParams(e,["playhead"])),this._adapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["bufferDuration"])),this._adapter.flags.isSeeking&&(e=this.requestBuilder.fetchParams(e,["seekDuration"])),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(e=this.requestBuilder.fetchParams(e,["adPlayhead","adViewedDuration","adViewability"]),e=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(e,["adPauseDuration"]):this.requestBuilder.fetchParams(e,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["adBufferDuration"])))),this._send(s.WillSendEvent.WILL_SEND_PING,s.Service.PING,e),this.startDelayed&&this._retryStart(),n.verbose(s.Service.PING)}};t.exports=r},function(t,e,i){var n=i(0),s=i(2),r=i(3),a=i(6),o={fireInit:function(t){this.isInitiated||(!this.getAdapter()||this.getAdapter()&&!this.getAdapter().flags.isStarted)&&(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,t=t||{},this._send(r.WillSendEvent.WILL_SEND_INIT,r.Service.INIT,t),this._adSavedError(),this._adSavedManifest(),n.notice(r.Service.INIT+" "+(t.title||t.mediaResource)))},fireError:function(t,e,i,a){this.isInitiated||this.getAdapter()&&this.getAdapter().flags.isStarted||this.viewTransform.nextView(),this._comm||this._initComm();var o=s.buildErrorParams(t,e,i,a);o.code&&delete o.code,this._send(r.WillSendEvent.WILL_SEND_ERROR,r.Service.ERROR,o),this._adSavedError(),this._adSavedManifest(),n.notice(r.Service.ERROR+" "+o.errorLevel+" "+o.errorCode),"fatal"===o.errorLevel&&this.fireStop()},fireFatalError:function(t,e,i,n){this.fireError(t,e,i,n),this.fireStop()},fireStop:function(t){(this.isInitiated||this.isStarted)&&(this._adapter&&(this._adapter.flags.isStopped=!0,this._adapter.monitor&&this._adapter.monitor.stop()),this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireBreakStop(),t=t||{},this._send(r.WillSendEvent.WILL_SEND_STOP,r.Service.STOP,t),n.notice(r.Service.STOP+" at "+t.playhead+"s"),this._reset())},fireOfflineEvents:function(t){this.options&&!this.options.offline?this.isInitiated||this._adapter&&this._adapter.flags.isStarted||this._adsAdapter&&this._adsAdapter.flags.isStarted?n.error("Adapters have to be stopped"):(this._offlineParams=t,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(a.Event.DONE,this.offlineReference))):n.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){var t=this._offlineParams;for(this._initComm();;){var e=this.requestBuilder.buildBody(r.Service.OFFLINE_EVENTS).viewJson;if(null===e[0])break;var i=this.viewTransform.nextView(),n=e[0].replace(/CODE_PLACEHOLDER/g,i.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"").replace(/,"parentId":"PARENT_PLACEHOLDER"/g,"");this._send(r.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,r.Service.OFFLINE_EVENTS,t,n,"POST",function(t,e){this.offlineStorage.removeView(e.offlineId)}.bind(this),{offlineId:e[1]})}this.offlineStorage.sent(),this._offlineParams=null}};t.exports=o},function(t,e,i){var n=i(3),s=i(0),r=i(5),a=i(14),o={_initInfinity:function(){this.infinity.on(a.Event.NAV,this._navListener.bind(this)),this.infinity.on(a.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(a.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(a.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(t,e,i){var n={params:i=this.requestBuilder.buildParams(i,e),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,n),this.infinity._comm&&null!==i&&this.options.enabled&&(this.lastServeiceSent=e,this.infinity._comm.sendRequest(new r(null,e,i)))},_navListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_NAV,n.Service.NAV,e),this._beat.isRunning||this._beat.start(),s.notice(n.Service.NAV+" "+e.route)},_sessionStartListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_START,n.Service.SESSION_START,e),this._beat.isRunning||this._beat.start(),s.notice(n.Service.SESSION_START+" "+e.route)},_sessionStopListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_STOP,n.Service.SESSION_STOP,e),this._beat.isRunning&&this._beat.stop(),s.notice(n.Service.SESSION_STOP+" "+e.route)},_eventListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_EVENT,n.Service.EVENT,e),s.notice(n.Service.EVENT+" "+e.name)},_sendBeat:function(t){var e={diffTime:t};this._sendInfinity(n.WillSendEvent.WILL_SEND_BEAT,n.Service.BEAT,e),this.infinity&&this.infinity._setLastActive(),s.verbose(n.Service.BEAT)},getSessionMetrics:function(){var t=this.options["session.metrics"];for(var e in t)if("object"!=typeof t[e]||!t[e].value){var i={};i.value=t[e],t[e]=i}return t}};t.exports=o},function(t,e){var i={getContext:function(){return this.options["session.context"]?this.storage.getSession("context"):"Default"},getSessionId:function(){return this.storage.getStorages("session")},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(t){this.storage.setStorages("data",t)},setSessionId:function(t){this.storage.setStorages("session",t)},setDataTime:function(t){this.storage.setStorages("dataTime",t)},setLastActive:function(t){this.storage.setStorages("lastactive",t)},getPageName:function(){if("undefined"!=typeof document&&document.title)return document.title},getIsSessionExpired:function(){var t=(new Date).getTime();return!this.getSessionId()||this.infinity.getFirstActive()<t-this.sessionExpire},getIsDataExpired:function(){var t=(new Date).getTime();return!this.storage.isEnabled()||(!this.getStoredData()||this.infinity.getFirstActive()<t-this.sessionExpire)}};t.exports=i},function(t,e,i){var n=i(9),s=i(30);n.adapters.TheoPlayer2=n.Adapter.extend({getVersion:function(){return s.version+"-"+s.name+"-"+s.tech},getPlayrate:function(){return this.flags.isPaused?0:this.player.playbackRate},getPlayhead:function(){return this.player.ads&&this.player.ads.playing?this.lastPlayhead:(this.lastPlayhead=this.player.currentTime,this.player.currentTime)},getIsLive:function(){return isNaN(this.player.duration)?null:this.player.duration===1/0},getDuration:function(){return this.player.ads&&this.player.ads.playing?this.lastDuration||null:(this.lastDuration=this.player.duration,this.lastDuration)},getThroughput:function(){return this.downloadedList&&this.downloadedList.length>0?this.downloadedList.reduce((function(t,e){return t+e}),0)/this.downloadedList.length:null},getBitrate:function(){var t=this.getActiveQuality();return t&&t.bandwidth?t.bandwidth:-1},getRendition:function(){var t=this.getActiveQuality();if(t){if(t.name&&isNaN(t.name))return t.name;if(t.height&&t.width)return n.Util.buildRenditionString(t.width,t.height,t.bandwidth);if(t.bandwidth&&!isNaN(t.bandwidth))return n.Util.buildRenditionString(t.bandwidth)}return this.player.videoHeight&&this.player.videoWidth?n.Util.buildRenditionString(this.player.videoWidth,this.player.videoHeight,0):-1},getResource:function(){return this.player.src&&!this.previousSrc&&(this.previousSrc=this.player.src),this.player.src||null},getPlayerVersion:function(){var t="THEOplayer";return"undefined"!=typeof THEOplayer?t+=THEOplayer.version:"undefined"!=typeof theoplayer&&(t+=theoplayer.version),t},getPlayerName:function(){return"THEOplayer"},getActiveQuality:function(){for(var t=this.player.videoTracks,e=0;e<t.length;e++){var i=t.item(e);if(i.enabled)return i.activeQuality}return{}},getLatency:function(){var t=null;this.getIsLive()&&null!==this.player.currentProgramDateTime&&(t=(new Date).getTime()-this.player.currentProgramDateTime);return t},registerListeners:function(){for(var t in n.Util.logAllEvents(this.player),this.monitorPlayhead(!0,!0),this.references=[],this.networkReferences=[],this.requestInterceptor=this.requestListener.bind(this),this.responseInterceptor=this.responseListener.bind(this),this.references.play=this.playListener.bind(this),this.references.playing=this.playingListener.bind(this),this.references.pause=this.pauseListener.bind(this),this.references.seeking=this.seekingListener.bind(this),this.references.ended=this.endedListener.bind(this),this.references.error=this.errorListener.bind(this),this.references.readystatechange=this.stateChangeListener.bind(this),this.references.sourcechange=this.endedListener.bind(this),this.references.timeupdate=this.timeUpdateListener.bind(this),this.networkReferences.offline=this.offlineListener.bind(this),this.references)this.player.addEventListener(t,this.references[t]);if(this.player.network)for(var e in this.player.network.addRequestInterceptor(this.requestInterceptor),this.player.network.addResponseInterceptor(this.responseInterceptor),this.networkReferences)this.player.network.addEventListener(e,this.networkReferences[e])},unregisterListeners:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references){for(var t in this.references)this.player.removeEventListener(t,this.references[t]);this.references=[]}if(this.player&&this.player.network&&this.networkReferences){for(var e in this.player.network.removeRequestInterceptor(this.requestInterceptor),this.player.network.removeResponseInterceptor(this.responseInterceptor),this.networkReferences)this.player.network.removeEventListener(e,this.networkReferences[e]);this.networkReferences=[]}},playListener:function(t){this.fireInit()},playingListener:function(t){this.plugin.getAdsAdapter()&&this.plugin.getAdsAdapter().flags.isStarted||(this.fireResume(),this.player.ads&&this.player.ads.playing||this.fireStart(),this.fireJoin())},pauseListener:function(t){this.flags.isSeeking||this.firePause()},seekingListener:function(t){this.flags.isPaused||this.fireSeekBegin()},endedListener:function(t){this.fireStop()},errorListener:function(t){this.fireError(t.error,t.type),this.fireStop()},offlineListener:function(t){this.fireError("OFFLINE_SOURCE")},timeUpdateListener:function(t){this.player.ads&&this.player.ads.playing||!this.flags.isStarted&&t.currentTime&&(this.fireStart(),this.fireJoin())},stateChangeListener:function(t){this.plugin.getAdsAdapter()||this.plugin.setAdsAdapter(new n.adapters.TheoPlayer2.NativeAdsAdapter(this.player)),0===t.currentTime&&0===t.readyState&&this.player.src!==this.previousSrc&&void 0!==this.player.src&&(this.fireStop(),this.previousSrc=this.player.src)},requestListener:function(t){"segment"===t.type&&(this.downloadingList||(this.downloadingList=[]),this.downloadingList[t.url]||(this.downloadingCount||(this.downloadingCount=0),0===this.downloadingCount&&(this.removeOldDownloads=!0),this.downloadingCount++,this.downloadingList[t.url]=Date.now()))},responseListener:function(t){if(this.downloadingList&&this.downloadingList[t.url]){this.simultaneous||(this.simultaneous=0),this.simultaneous=Math.max(this.downloadingCount,this.simultaneous);var e=t.body.byteLength;e&&(this.downloadedList&&!this.removeOldDownloads||(this.downloadedList=[],this.removeOldDownloads=!1),this.downloadedList.push(8*e*1e3*this.simultaneous/(Date.now()-this.downloadingList[t.url]))),delete this.downloadingList[t.url],this.downloadingCount--,0===this.downloadingCount&&(this.simultaneous=0)}t.respondWith(t)}},{NativeAdsAdapter:i(64)}),t.exports=n.adapters.TheoPlayer2},function(t,e,i){var n=i(9),s=i(30),r=n.Adapter.extend({getVersion:function(){return s.version+"-THEOplayer2-ads"},getPlayhead:function(){return this.player.currentTime},getTitle:function(){return this.player.ads.currentAdBreak&&this.player.ads.currentAdBreak.ads[this.adCount-1].title||"unknown"},getDuration:function(){return this.player.ads.currentAdBreak?this.player.ads.currentAdBreak.ads[this.adCount-1].duration:this.player.duration},getResource:function(){return this.player.ads.currentAdBreak?this.player.ads.currentAdBreak.ads[this.adCount-1].mediaUrl?this.player.ads.currentAdBreak.ads[this.adCount-1].mediaUrl:this.player.ads.currentAdBreak.ads[this.adCount-1].mediaFiles[0].resourceURI:null},getPosition:function(){return this.plugin.getAdapter().flags.isJoined?this.plugin.getAdapter().getDuration()&&this.plugin.getAdapter().getPlayhead()+this.plugin._ping.interval/1e3>this.plugin.getAdapter().getDuration()?n.Constants.AdPosition.Postroll:n.Constants.AdPosition.Midroll:n.Constants.AdPosition.Preroll},getGivenBreaks:function(){return this.player.ads.scheduledAdBreaks?this.player.ads.scheduledAdBreaks.length:null},getGivenAds:function(){return this.actualSlot?this.actualSlot.ads.length:null},getIsVisible:function(){return n.Util.calculateAdViewability(this.player.element)},getAudioEnabled:function(){return!this.player.muted&&this.player.volume>0},getIsSkippable:function(){return!!(this.player.ads&&this.player.ads.currentAds&&this.player.ads.currentAds[0])&&this.player.ads.currentAds[0].skipOffset>=0},getIsFullscreen:function(){return!!(this.player.element&&this.player.element.clientWidth&&this.player.element.clientHeight)&&(window.innerHeight<=this.player.element.clientHeight+30&&window.innerWidth<=this.player.element.clientWidth+30)},registerListeners:function(){for(var t in n.Util.logAllEvents(this.player.ads),this.monitorPlayhead(!0,!1),this.references=[],this.references.adbegin=this.playAdListener.bind(this),this.references.adend=this.endedAdListener.bind(this),this.references.aderror=this.errorAdListener.bind(this),this.references.adskip=this.skipAdListener.bind(this),this.references.adbreakbegin=this.breakBeginListener.bind(this),this.references.adbreakend=this.breakEndListener.bind(this),this.playerReferences=[],this.playerReferences.pause=this.pauseAdListener.bind(this),this.playerReferences.playing=this.resumeAdListener.bind(this),this.playerReferences.play=this.resumeAdListener.bind(this),this.playerReferences.timeupdate=this.quartileListener.bind(this),this.references)this.player.ads.addEventListener(t,this.references[t]);for(var e in this.playerReferences)this.player.addEventListener(e,this.playerReferences[e])},unregisterListeners:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.player.ads&&this.references){for(var t in this.references)this.player.ads.removeEventListener(t,this.references[t]);this.references=[]}if(this.player&&this.playerReferences){for(var e in this.playerReferences)this.player.removeEventListener(e,this.playerReferences[e]);this.playerReferences=[]}},playAdListener:function(t){this.adCount+=1,this.plugin._adapter.fireInit(),this.fireStart(),this.fireJoin(),this.duration=this.getDuration(),this.firstQuartileTriggered=!1,this.secondQuartileTriggered=!1,this.thirdQuartileTriggered=!1},errorAdListener:function(t){this.fireError()},endedAdListener:function(t){this.fireStop({adPlayhead:this.duration})},skipAdListener:function(t){this.fireStop({skipped:!0})},pauseAdListener:function(t){this.firePause()},resumeAdListener:function(t){this.fireResume()},breakBeginListener:function(t){this.adCount=0,this.actualSlot=t.ad},breakEndListener:function(t){this.fireBreakStop()},quartileListener:function(t){this.getPlayhead()>this.getDuration()/4&&(this.firstQuartileTriggered?this.getPlayhead()>this.getDuration()/2&&(this.secondQuartileTriggered?this.getPlayhead()>.75*this.getDuration()&&(this.thirdQuartileTriggered||(this.fireQuartile(3),this.thirdQuartileTriggered=!0)):(this.fireQuartile(2),this.secondQuartileTriggered=!0)):(this.fireQuartile(1),this.firstQuartileTriggered=!0))}});t.exports=r}])}));
//# sourceMappingURL=sp.min.js.map